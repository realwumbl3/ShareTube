/*! For license information please see zyX-es6.js.LICENSE.txt */
var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}t.r(e),t.d(e,{click:()=>sa,clickOne:()=>ua,clickOrTwo:()=>ca,hrefDoubleClick:()=>ha,pointerDownMoveUp:()=>la,rightClick:()=>aa,wheel:()=>fa});var o="zyx-ph";function i(t){return"<".concat(o," id='").concat(t,"'></").concat(o,">")}function a(t){var e=t.match(/id='(.*?)'/);return(null==e?void 0:e.length)>0?e[1]:null}function u(t){var e=document.createElement("div");return e.innerHTML=t.trim(),Array.from(e.children)}function s(t,e){e.parentNode.insertBefore(t,e.nextSibling)}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function f(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}new RegExp("(".concat(i("\\d+"),")"),"g");var h=function(){return function(t,e){return e&&l(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reactive=e,this.interp=n,this.mode=r||"text",this.activeDomNode=null},[{key:"interprate",value:function(){return this.interp?this.interp(this.reactive.value):this.reactive.value}},{key:"createZyXHTMLReactiveNode",value:function(t,e,n){var r,o,i=this;if(n)r=function(){var t=i.interprate();if(null===t)return e.removeAttribute(n);e.setAttribute(n,t),"INPUT"===e.tagName&&(e.value=t,e.dispatchEvent(new Event("change")))},o=e,setTimeout(function(){return r()},0);else{if("text"===this.mode){var a=document.createTextNode("");e.replaceWith(a),o=a,r=function(){var t=i.interprate();a.textContent=t}}else"html"===this.mode&&(this.activeDomNode=e,o=e.parentElement,r=function(){var t=On(i.interprate());t?(i.activeDomNode.replaceWith(t),i.activeDomNode=t):i.activeDomNode.style.display="none"});r()}this.reactive.eventListeners?this.reactive.eventListeners.subscribe(r,o):this.reactive.subscribe(r,o)}}])}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(){var t=w(),e=t.m(y),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,v(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(y=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new S(t,e)},AsyncIterator:g,async:function(t,e,n,o,a){return(r(e)?b:m)(i(t),e,n,o,a)},keys:d,values:v}})()}function v(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(p(t)+" is not iterable")}function d(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function m(t,e,n,r,o){var i=b(t,e,n,r,o);return i.next().then(function(t){return t.done?t.value:i.next()})}function b(t,e,n,r,o){return new g(w().w(t,e,n,r),o||Promise)}function g(t,e){function n(r,o,i,a){try{var u=t[r](o),s=u.value;return s instanceof S?e.resolve(s.v).then(function(t){n("next",t,i,a)},function(t){n("throw",t,i,a)}):e.resolve(s).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,a)})}catch(t){a(t)}}var r;this.next||(k(g.prototype),k(g.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),k(this,"_invoke",function(t,o,i){function a(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(a,a):a()},!0)}function w(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return k(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,u=0,s=t,h.n=n,a}};function p(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=h.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,h.v=r,h.n=i[1]):p<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,h.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,y),u=l,s=y;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(h.n=-1),p(u,s)):h.n=s:h.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(k(e={},r,function(){return this}),e),f=c.prototype=u.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,k(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,k(f,"constructor",c),k(c,"constructor",s),s.displayName="GeneratorFunction",k(c,o,"GeneratorFunction"),k(f),k(f,o,"Generator"),k(f,r,function(){return this}),k(f,"toString",function(){return"[object Generator]"}),(w=function(){return{w:i,m:h}})()}function k(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}k=function(t,e,n,r){function i(e,n){k(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},k(t,e,n,r)}function S(t,e){this.v=t,this.k=e}function O(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=E(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function x(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function j(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||E(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){if(t){if("string"==typeof t)return P(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function T(){return j(document.querySelectorAll("[zyx-shadowroot-processed]")).map(function(t){return t.shadow}).filter(Boolean)}function A(t){T().forEach(t)}function _(){A(function(t){t.getSelection&&t.getSelection().removeAllRanges()}),document.getSelection&&document.getSelection().removeAllRanges()}function M(t){var e=[];return A(function(n){e.push.apply(e,j(n.querySelectorAll(t)))}),e.push.apply(e,j(document.querySelectorAll(t))),e}var C=Object.fromEntries(["focus","blur","click","dblclick","contextmenu","mousedown","mouseup","mouseover","mousemove","mouseout","mouseenter","mouseleave","wheel","scroll","submit","load","error","input","change","resize","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","dropzone","dropzoneenter","dropzoneleave","dropzoneover","dropzoneout","dropzoneenter","dropzoneleave","pointerdown","pointerup","pointermove","pointerover","pointerout","pointerenter","pointerleave","pointercancel","pointerlockchange","pointerlockerror","gotpointercapture","lostpointercapture","keydown","keypress","keyup"].map(function(t){return["zyx-".concat(t),function(e){var n=e.node,r=e.data,o=e.zyxhtml;try{n.addEventListener(t,function(t){var e=new Proxy(t,{get:function(e,r){return r in t?t[r]:"el"===r?n:"e"===r||"event"===r?t:r in o?o[r]:void 0}});return r(e)})}catch(e){console.error("Error adding event listener for [zyx-".concat(t,"]:"),{e,node:n,data:r,zyxhtml:o})}}]}));C["zyx-enter"]=function(t){var e=t.node,n=t.data,r=t.zyxhtml;e.addEventListener("keydown",function(t){"Enter"===t.key&&n(new Proxy(t,{get:function(e,n){return"e"===n||"event"===n?t:n in r?r[n]:void 0}}))})};var I=Object.fromEntries(["up","down","move","over","out","enter","leave","contextmenu","wheel"].map(function(t){return["zyx-mice".concat(t),function(e){var n=e.node,r=e.data,o=e.zyxhtml;try{n.addEventListener("pointer".concat(t),function(t){if("touch"!==t.pointerType){var e=new Proxy(t,{get:function(e,r){return r in t?t[r]:"el"===r?n:"e"===r||"event"===r?t:r in o?o[r]:void 0}});return r(e)}})}catch(e){console.error("Error adding event listener for [zyx-mice".concat(t,"]:"),{e,node:n,data:r,zyxhtml:o})}}]}));function L(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=U(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function D(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}function F(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function B(t,e,n){return t.set(X(t,e),n),n}function z(t,e){return t.get(X(t,e))}function X(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function U(t,e){if(t){if("string"==typeof t)return W(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Y="or",q=new WeakMap,V=Symbol("zyxMultiReactive"),G=function(t){return Array.isArray(t)&&!0===t[V]};function H(t){var e=Array.isArray(t),n=e&&t&&"function"==typeof t.subscribe;if(!e||n)return{reactive:t,predicate:null};if(0===t.length)return{reactive:void 0,predicate:null};var r,o,i=t[t.length-1],a=t.slice(0,-1);if("function"==typeof i)return 0===a.length?{reactive:[],predicate:i}:1===a.length?{reactive:a[0],predicate:i}:{reactive:(r=a,o=r.slice(),o[V]=!0,o),predicate:i};var u=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||U(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),s=u[0],c=u[1];return{reactive:s,predicate:"function"==typeof c?c:null}}var $=new WeakMap,K=new WeakMap,Z=new WeakMap,J=function(){return function(t,e){return e&&N(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,$,[]),F(this,K,null),F(this,Z,new WeakMap),q.set(e,this)},[{key:"addCondition",value:function(t,e){var n=this;z($,this).push({element:t,condition:e}),z(Z,this).set(t,e),t.style.display="none";var r=function(e){e&&"object"===R(e)&&"subscribe"in e&&"function"==typeof e.subscribe&&e.subscribe(function(){return n.evaluateConditions()},t)},o=function(t){G(t)?t.forEach(r):r(t)};o(e.reactive),e.inlineOr&&o(e.inlineOr.reactive),this.evaluateConditions()}},{key:"evaluateConditions",value:function(){var t=!1,e=null;z(K,this)&&(z(K,this).style.display="none",B(K,this,null));var n,r=L(z($,this));try{for(r.s();!(n=r.n()).done;)n.value.element.style.display="none"}catch(t){r.e(t)}finally{r.f()}var o,i=function(t){return t&&"object"===R(t)&&"value"in t?t.value:t},a=function(t,e){if(G(t)){var n=t.map(i);return e?e.apply(void 0,function(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||U(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n)):n[0]}var r=i(t);return e?e(r):r},u=L(z($,this));try{for(u.s();!(o=u.n()).done;){var s=o.value,c=s.element,l=s.condition;if(l.isElse)e=c;else{var f=a(l.reactive,l.predicate);!f&&l.inlineOr&&(f=a(l.inlineOr.reactive,l.inlineOr.predicate)),f&&!t&&(c.style.display="",B(K,this,c),t=!0)}}}catch(t){u.e(t)}finally{u.f()}!t&&e&&(e.style.display="",B(K,this,e))}}])}();function Q(t){var e=q.get(t);return e||(e=new J(t)),e}function tt(t){var e=function(t){for(var e=t.previousElementSibling;e;){if(e.hasAttribute("zyx-if"))return e;e=e.previousElementSibling}return null}(t);return e?Q(e):(console.warn("zyx-elif or zyx-else found without a preceding zyx-if:",t),null)}var et={"zyx-if":function(t){var e=t.node,n=t.data,r=t.zyxhtml,o=Q(e),i=H(n),u=i.reactive,s=i.predicate,c=null;if(e.hasAttribute(Y)){var l=a(e.getAttribute(Y)),f=null!==l&&r?r.getDataByPlaceholderId(l):null;null!=f&&(c=H(f)),r&&r.markAttributeProcessed(e,Y)}o.addCondition(e,{reactive:u,predicate:s,inlineOr:c})},"zyx-elif":function(t){var e=t.node,n=t.data,r=t.zyxhtml,o=tt(e);if(o){var i=H(n),u=i.reactive,s=i.predicate,c=null;if(e.hasAttribute(Y)){var l=a(e.getAttribute(Y)),f=null!==l&&r?r.getDataByPlaceholderId(l):null;null!=f&&(c=H(f)),r&&r.markAttributeProcessed(e,Y)}o.addCondition(e,{reactive:u,predicate:s,inlineOr:c})}},"zyx-else":function(t){var e=t.node,n=(t.data,t.zyxhtml,tt(e));n&&n.addCondition(e,{isElse:!0})}};function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function rt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ot(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function it(t,e,n){return e=ft(e),function(t,e){if(e&&("object"==nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ct()?Reflect.construct(e,n||[],ft(t).constructor):e.apply(t,n))}function at(){return at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ft(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},at.apply(null,arguments)}function ut(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lt(t,e)}function st(t){var e="function"==typeof Map?new Map:void 0;return st=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(ct())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&lt(o,n.prototype),o}(t,arguments,ft(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),lt(n,t)},st(t)}function ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ct=function(){return!!t})()}function lt(t,e){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lt(t,e)}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vt(r.key),r)}}function yt(t,e,n){return e&&pt(t.prototype,e),n&&pt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vt(t){var e=function(t){if("object"!=nt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nt(e)?e:e+""}new WeakMap;var dt=function(){function t(){return ht(this,t),it(this,t,arguments)}return ut(t,st(Set)),yt(t,[{key:"add",value:function(e){if(null==e)throw new TypeError("Cannot add null or undefined to WeakRefSet");this.has(e)||at(ft(t.prototype),"add",this).call(this,new WeakRef(e))}},{key:"forEach",value:function(t){if("function"!=typeof t)throw new TypeError("Callback must be a function");var e,n=rt(this.get());try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"delete",value:function(e){if(null==e)return!1;var n,r=rt(at(ft(t.prototype),"values",this).call(this));try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.deref()===e)return at(ft(t.prototype),"delete",this).call(this,o)}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"singleize",value:function(e){if(null==e)throw new TypeError("Cannot singleize with null or undefined reference");var n,r=rt(at(ft(t.prototype),"values",this).call(this));try{for(r.s();!(n=r.n()).done;){var o=n.value;o.deref()!==e&&at(ft(t.prototype),"delete",this).call(this,o)}}catch(t){r.e(t)}finally{r.f()}}},{key:"get",value:function(){var e,n=[],r=rt(at(ft(t.prototype),"values",this).call(this));try{for(r.s();!(e=r.n()).done;){var o=e.value,i=o.deref();void 0===i?at(ft(t.prototype),"delete",this).call(this,o):n.push(i)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"size",get:function(){return this.get().length}}])}(),mt=function(){function t(e){var n;if(ht(this,t),"number"!=typeof e||e<0)throw new TypeError("Limit must be a non-negative number");return(n=it(this,t)).limit=e,n}return ut(t,st(Array)),yt(t,[{key:"prepend",value:function(t){return this.length>=this.limit&&this.pop(),this.unshift(t),this}},{key:"append",value:function(t){return this.length>=this.limit&&this.shift(),this.push(t),this}},{key:"popleft",value:function(){if(0===this.length)throw new Error("Deque is empty");return this.shift()}},{key:"popright",value:function(){if(0===this.length)throw new Error("Deque is empty");return this.pop()}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isFull",value:function(){return this.length>=this.limit}}])}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function gt(t){return function(t){if(Array.isArray(t))return wt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return wt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xt(r.key),r)}}function Ot(t,e,n){return e&&St(t.prototype,e),n&&St(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xt(t){var e=function(t){if("object"!=bt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bt(e)?e:e+""}function jt(t,e,n){return e=Ct(e),function(t,e){if(e&&("object"==bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Et(t)}(t,_t()?Reflect.construct(e,n||[],Ct(t).constructor):e.apply(t,n))}function Et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(){return Pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Ct(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Pt.apply(null,arguments)}function Tt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mt(t,e)}function At(t){var e="function"==typeof Map?new Map:void 0;return At=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(_t())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Mt(o,n.prototype),o}(t,arguments,Ct(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Mt(n,t)},At(t)}function _t(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_t=function(){return!!t})()}function Mt(t,e){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mt(t,e)}function Ct(t){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ct(t)}function It(t,e){return t.get(Lt(t,e))}function Lt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Rt=new WeakMap,Nt=function(){function t(e){var n;return kt(this,t),function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(Et(n=e instanceof Array?jt(this,t,gt(e)):jt(this,t)),Rt,void 0),function(t,e,n){t.set(Lt(t,e),n)}(Rt,Et(n),new zt),Et(n)}return Tt(t,At(Array)),Ot(t,[{key:"fill",value:function(e,n){for(var r=0;r<e;r++)Pt(Ct(t.prototype),"push",this).call(this,n(r));return this.callListeners("fill"),this}},{key:"interp",value:function(t){return new h(this,t)}},{key:"contentInterp",value:function(t){return new h(this,t,"html")}},{key:"value",get:function(){return this}},{key:"subscribe",value:function(t,e){It(Rt,this).subscribe(t,e)}},{key:"removeListener",value:function(t){It(Rt,this).unsubscribe(t)}},{key:"callListeners",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(e=It(Rt,this)).notifySubscribers.apply(e,[this,t].concat(r)),this}},{key:"push",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=Pt(Ct(t.prototype),"push",this)).call.apply(e,[this].concat(r)),this.callListeners.apply(this,["push"].concat(r)),this}},{key:"pop",value:function(){var e=Pt(Ct(t.prototype),"pop",this).call(this);return this.callListeners("pop",e),e}},{key:"shift",value:function(){var e=Pt(Ct(t.prototype),"shift",this).call(this);return this.callListeners("shift",e),e}},{key:"unshift",value:function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=Pt(Ct(t.prototype),"unshift",this)).call.apply(e,[this].concat(r)),this.callListeners.apply(this,["unshift"].concat(r)),this}},{key:"splice",value:function(e,n){for(var r,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];var u=(r=Pt(Ct(t.prototype),"splice",this)).call.apply(r,[this,e,n].concat(i));return this.callListeners.apply(this,["splice",e,n].concat(i)),u}},{key:"update",value:function(){return this.callListeners("update"),this}},{key:"clear",value:function(){return Pt(Ct(t.prototype),"splice",this).call(this,0,this.length),this.callListeners("clear"),this}},{key:"remove",value:function(t){var e=this.indexOf(t);return-1!==e&&this.splice(e,1),this}},{key:"sort",value:function(e){return Pt(Ct(t.prototype),"sort",this).call(this,e),this.callListeners("sort",e),this}},{key:"swap",value:function(t){if(!Array.isArray(t))throw new TypeError("LiveList.swap() requires an array");return this.clear(),this.push.apply(this,gt(t)),this}},{key:"insert",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.splice.apply(this,[t,0].concat(n)),this}}])}(),Dt=function(){function t(e){return kt(this,t),jt(this,t,[e])}return Tt(t,mt),Ot(t)}(),Ft=function(){return Ot(function t(e){kt(this,t),this.initialValue=e,this.value=e,this.eventListeners=new zt},[{key:"interp",value:function(t){return new h(this,t,"text")}},{key:"contentInterp",value:function(t){return new h(this,t,"html")}},{key:"subscribe",value:function(t,e){this.eventListeners.subscribe(t,e)}},{key:"reset",value:function(){this.value=this.initialValue,this.eventListeners.notifySubscribers(this.value)}},{key:"toggle",value:function(){var t=this.get();if("boolean"!=typeof t)throw new TypeError("LiveVar.toggle() only works for Booleans");return this.set(!t),this}},{key:"set",value:function(t){t!==this.value&&(this.value=t,this.eventListeners.notifySubscribers(this.value))}},{key:"default",value:function(t,e){return void 0!==this.value&&null!==this.value&&this.value!==t||this.set(e),this}},{key:"get",value:function(){return this.value}}])}(),Bt=new WeakMap,zt=function(){return Ot(function t(){kt(this,t),this.subscribers=new dt},[{key:"subscribe",value:function(t,e){var n,r=this;if("function"!=typeof t)throw new TypeError("Callback must be a function");return e&&(n=e,Bt.has(n)||Bt.set(n,[]),Bt.get(n)).push(t),this.subscribers.add(t),function(){return r.unsubscribe(t)}}},{key:"unsubscribe",value:function(t){if("function"!=typeof t)throw new TypeError("Callback must be a function");this.subscribers.delete(t)}},{key:"notifySubscribers",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.subscribers.forEach(function(t){return t.apply(void 0,e)})}}])}();function Xt(t,e){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xt(t,e)}function Ut(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ut=function(){return!!t})()}function Wt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||Vt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function qt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Vt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Vt(t,e){if(t){if("string"==typeof t)return Gt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(t,e):void 0}}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ne(r.key),r)}}function $t(t,e,n){Kt(t,e),e.set(t,n)}function Kt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zt(t,e,n){return t.set(Qt(t,e),n),n}function Jt(t,e){return t.get(Qt(t,e))}function Qt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ee(t,e,n){return(e=ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ne(t){var e=function(t){if("object"!=Yt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yt(e)?e:e+""}var re=new WeakMap,oe={"zyx-live-list":function(t){var e=t.node,n=t.data;return new be(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach(function(e){ee(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({container:e},n))}},ie=new WeakMap,ae=new WeakMap,ue=new WeakMap,se=new WeakMap,ce=new WeakMap,le=new WeakMap,fe=new WeakMap,he=new WeakMap,pe=new WeakMap,ye=new WeakMap,ve=new WeakMap,de=new WeakMap,me=new WeakSet,be=function(){return function(t,e){return e&&Ht(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.container,r=void 0===n?r:n,o=e.list,i=void 0===o?null:o,a=e.compose,u=void 0===a?null:a,s=e.debounce,c=void 0===s?1:s,l=e.range,f=void 0===l?null:l,p=e.after,y=void 0===p?null:p,v=e.offset,d=void 0===v?0:v,m=e.filter,b=void 0===m?null:m;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){Kt(t,e),e.add(t)}(this,me),$t(this,ie,new WeakMap),$t(this,ae,void 0),$t(this,ue,void 0),$t(this,se,void 0),$t(this,ce,void 0),$t(this,le,void 0),$t(this,fe,void 0),$t(this,he,void 0),$t(this,pe,void 0),$t(this,ye,void 0),$t(this,ve,void 0),$t(this,de,null),!(i instanceof Nt||i instanceof h))throw new Error("list must be an instance of LiveList or LiveVar.interp() (LiveInterp)");r.liveDomList=this,Zt(ae,this,r),this.infiniteScrolling=null,re.set(r,this),Zt(ce,this,u),Zt(ye,this,y),Zt(ue,this,i),Zt(fe,this,f),Zt(he,this,d),Zt(pe,this,c),Zt(le,this,"function"==typeof b?b:null),Zt(ve,this,this.arrayModified.bind(this)),i instanceof Nt?(Zt(se,this,i),Jt(se,this).subscribe(Jt(ve,this),Jt(ae,this))):i instanceof h&&(Zt(se,this,Qt(me,this,ge).call(this)),Qt(me,this,we).call(this),Jt(ue,this).reactive.subscribe(this.liveVarChanged.bind(this),Jt(ae,this))),this.update()},[{key:"startIndex",get:function(){return Jt(fe,this)[0]}},{key:"endIndex",get:function(){return Jt(fe,this)[1]}},{key:"isUpdating",get:function(){return null!==Jt(de,this)}},{key:"liveVarChanged",value:function(){Qt(me,this,ke).call(this),Zt(se,this,Qt(me,this,ge).call(this)),Qt(me,this,we).call(this),this.update()}},{key:"arrayModified",value:function(t,e){var n=this;Jt(de,this)&&clearTimeout(Jt(de,this)),Zt(de,this,setTimeout(function(){n.update(),Zt(de,n,null)},Jt(pe,this)))}},{key:"forEach",value:function(t){var e,n=qt(this.entries());try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"entries",value:function(){var t=this;return Array.from(Jt(ae,this).children,function(e){return[e,Jt(ie,t).get(e)]})}},{key:"orderedEntires",value:function(){var t=this;return Array.from(this.orderedDomItems(),function(e){return[e,Jt(ie,t).get(e)]})}},{key:"domItems",value:function(){var t=this;return Array.from(Jt(ae,this).children,function(e){return Jt(ie,t).get(e)})}},{key:"orderedDomItems",value:function(){return Array.from(Jt(ae,this).children).sort(function(t,e){return t.style.order-e.style.order})}},{key:"get",value:function(t){return Jt(ie,this).get(t)}},{key:"solo",value:function(t){var e,n=!1,r=qt(this.entries());try{for(r.s();!(e=r.n()).done;){var o=Wt(e.value,2),i=o[0];o[1]!==t?i.remove():n=!0}}catch(t){r.e(t)}finally{r.f()}if(!n){var a=On(this.createCompose(t));if(a instanceof HTMLTemplateElement||a instanceof DocumentFragment)throw Error("cannot associate reactive object with a template element");this.appendToContainer(a,t),Jt(ie,this).set(a,t),"symbol"!==Yt(t)&&"object"!==Yt(t)||Jt(ie,this).set(t,a)}return this}},{key:"createCompose",value:function(t){var e;if(!Jt(ce,this))return t;for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"object"===Yt(Jt(ce,this).prototype)?function(t,e,n){if(Ut())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Xt(o,n.prototype),o}(Jt(ce,this),[t].concat(r)):(e=Jt(ce,this)).call.apply(e,[this,t].concat(r))}},{key:"getTarget",value:function(){var t=this,e=Object.values(Jt(se,this));if(null!==Jt(fe,this)){var n=this.getRange(),r=n.start,o=n.end;e=e.slice(r,o)}return Jt(le,this)&&(e=e.filter(function(e,n){return Jt(le,t).call(t,e,n)})),e}},{key:"getRange",value:function(){return{start:Math.max(0,Jt(fe,this)[0]+Jt(he,this)),end:Math.min(Jt(se,this).length,Jt(fe,this)[1]+Jt(he,this))}}},{key:"getRangeHalf",value:function(){var t=this.getRange();return(t.start+t.end)/2}},{key:"getRangeLength",value:function(){return this.getRange().end-this.getRange().start}},{key:"setFilter",value:function(t){Zt(le,this,"function"==typeof t?t:null),this.update()}},{key:"updateRange",value:function(t){var e=t(Jt(fe,this));Zt(fe,this,[Math.max(0,e[0]),Math.max(0,e[1])]),Jt(ae,this).setAttribute("data-range",Jt(fe,this).join(",")),this.update()}},{key:"shiftRange",value:function(t){this.updateRange(function(e){return[e[0]+t,e[1]+t]})}},{key:"updateOffset",value:function(t){var e=t(Jt(he,this));Zt(he,this,Math.max(0,e)),Jt(ae,this).setAttribute("data-offset",Jt(he,this)),this.update()}},{key:"removeNonArrayElements",value:function(t){t=t||this.getTarget();var e,n=qt(this.entries());try{for(n.s();!(e=n.n()).done;){var r=Wt(e.value,2),o=r[0],i=r[1];t.includes(i)||o.remove()}}catch(t){n.e(t)}finally{n.f()}}},{key:"getCreateElements",value:function(t){var e=this;t=t||this.getTarget();var n=this.domItems(),r=-1;return t.map(function(o){r++;var i=Jt(ie,e).get(o);if(i)return n.includes(o)||e.appendToContainer(i,o),{item:o,element:i,index:r};var a=e.createCompose(o);if((i=On(a))instanceof HTMLTemplateElement||i instanceof DocumentFragment)throw console.error("cannot associate reactive object with a template element",{element:i,item:o,zyXHtml:a,target_content:t}),Error("cannot associate reactive object with a template element");return e.appendToContainer(i,a),Jt(ie,e).set(i,o),"symbol"!==Yt(o)&&"object"!==Yt(o)||Jt(ie,e).set(o,i),{item:o,index:r,element:i}})}},{key:"appendToContainer",value:function(t,e){Jt(ae,this).appendChild(t),this.infiniteScrolling&&this.infiniteScrolling.mutationObserver.observe(t);try{var n;null===(n=e.onConnected)||void 0===n||n.call(e,t)}catch(t){console.error("item.onConnected error",t)}}},{key:"update",value:function(){var t=this.getTarget();this.removeNonArrayElements(t);var e,n=qt(this.getCreateElements(t));try{for(n.s();!(e=n.n()).done;){var r=e.value,o=r.element,i=r.index;o.style.order=i,o.setAttribute("list-index",i)}}catch(t){n.e(t)}finally{n.f()}Jt(ye,this)&&Jt(ye,this).call(this)}}])}();function ge(){if(Jt(ue,this)instanceof Nt)return Jt(ue,this);if(Jt(ue,this)instanceof h){var t=Jt(ue,this).interprate();if(null==t||void 0===t)return new Nt([]);if(!(t instanceof Nt))throw new Error("LiveVar.interp() callback must return a LiveList instance or null/undefined");return t}throw new Error("Invalid list type")}function we(){Jt(se,this)&&Jt(se,this).subscribe(Jt(ve,this),Jt(ae,this))}function ke(){Jt(se,this)&&Jt(se,this).removeListener(Jt(ve,this))}function Se(t){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(t)}function Oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||je(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=je(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function je(t,e){if(t){if("string"==typeof t)return Ee(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(t,e):void 0}}function Ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Te(r.key),r)}}function Te(t){var e=function(t){if("object"!=Se(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Se(e)?e:e+""}var Ae=function(){return function(t,e){return e&&Pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._owner=e,this._namespaces=new Map},[{key:"_ensure",value:function(t){return this._namespaces.has(t)||this._namespaces.set(t,{selected:null,controls:new Map,panels:new Map,listeners:new Set}),this._namespaces.get(t)}},{key:"registerControl",value:function(t,e,n){var r=this,o=this._ensure(t);o.controls.has(e)||o.controls.set(e,new Set),o.controls.get(e).add(n),n.__zyx_radioview_bound__||(n.addEventListener("click",function(){return r.select(t,e)}),n.__zyx_radioview_bound__=!0,n.setAttribute("role","tab")),null==o.selected&&(o.selected=e),this._updateUI(t)}},{key:"registerPanel",value:function(t,e,n){var r=this._ensure(t);r.panels.has(e)||r.panels.set(e,new Set),r.panels.get(e).add(n),n.setAttribute("role","tabpanel"),null==r.selected&&(r.selected=e),this._updateUI(t)}},{key:"select",value:function(t,e){var n=this._ensure(t);if(n.selected!==e){n.selected=e,this._updateUI(t);var r,o=xe(n.listeners);try{for(o.s();!(r=o.n()).done;){var i=r.value;try{i(e)}catch(t){console.error("RadioViewManager subscriber error:",t)}}}catch(t){o.e(t)}finally{o.f()}}}},{key:"getSelected",value:function(t){return this._ensure(t).selected}},{key:"subscribe",value:function(t,e){var n=this._ensure(t);return n.listeners.add(e),function(){n.listeners.delete(e)}}},{key:"_updateUI",value:function(t){var e,n=this._ensure(t),r=n.selected,o=xe(n.panels.entries());try{for(o.s();!(e=o.n()).done;){var i,a=Oe(e.value,2),u=a[0],s=a[1],c=u===r,l=xe(s);try{for(l.s();!(i=l.n()).done;){var f=i.value;c?(f.hidden=!1,f.style.display=""):(f.hidden=!0,f.style.display="none")}}catch(t){l.e(t)}finally{l.f()}}}catch(t){o.e(t)}finally{o.f()}var h,p=xe(n.controls.entries());try{for(p.s();!(h=p.n()).done;){var y,v=Oe(h.value,2),d=v[0],m=v[1],b=d===r,g=xe(m);try{for(g.s();!(y=g.n()).done;){var w=y.value;b?(w.classList.add("zyx-radioview-active"),w.setAttribute("aria-selected","true")):(w.classList.remove("zyx-radioview-active"),w.setAttribute("aria-selected","false"))}}catch(t){g.e(t)}finally{g.f()}}}catch(t){p.e(t)}finally{p.f()}}}])}();function _e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Me(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ie(t,e,n){return(e=function(t){var e=function(t){if("object"!=Le(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Le(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function Re(t,e){if("object"!==Le(t)||!("subscribe"in t))return t+e;var n=new Ft(t.value+e);return t.subscribe(function(t){n.set(t+e)},t),n}function Ne(t,e){if(!(t instanceof HTMLElement))throw new Error("zyxTransform requires a valid HTMLElement");var n={},r={},o="";function i(t){if(!t||"string"!=typeof t)throw new Error("Snapshot name must be a non-empty string");n[t]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(n),!0).forEach(function(e){Ie(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},r)}function a(t){r=t,c(),l()}function u(t){if(!t||"string"!=typeof t)throw new Error("Restore name must be a non-empty string");return t in n?(a(null),a(n[t]),!0):(console.warn("No snapshot found with name: ".concat(t)),!1)}function s(){if(e){for(var n in e){var o=e[n];"object"===Le(o)&&"reset"in o&&o.reset()}c(),l()}else r={},t.style.transformOrigin="50% 50%",t.style.transform=""}function c(){var e="object"===Le(r.originX)&&"subscribe"in r.originX?r.originX.value:r.originX||"50%",n="object"===Le(r.originY)&&"subscribe"in r.originY?r.originY.value:r.originY||"50%";t.style.transformOrigin="".concat(e," ").concat(n)}function l(){for(var e=[],n=0,i=Object.entries(r);n<i.length;n++){var a=_e(i[n],2),u=a[0],s=a[1];if(s&&"originX"!==u&&"originY"!==u){var c="object"===Le(s)&&"subscribe"in s?s.value:s;e.push("".concat(u,"(").concat(c,")"))}}o=e.join(" "),t.style.transform=o}return e&&function(){if(e){for(var n=0,o=[{key:"scale",unit:""},{key:"rotateX",unit:"deg"},{key:"rotateY",unit:"deg"},{key:"rotateZ",unit:"deg"},{key:"translateX",unit:"px"},{key:"translateY",unit:"px"},{key:"translateZ",unit:"px"},{key:"originX",unit:"%"},{key:"originY",unit:"%"}];n<o.length;n++){var i=o[n],a=i.key,u=i.unit;if(a in e){var s=e[a];"object"===Le(s)&&"subscribe"in s?(r[a]="scale"===a?s:Re(s,u),"originX"===a||"originY"===a?s.subscribe(c,t):s.subscribe(l,t)):r[a]="scale"===a?s:s+u}}c(),l()}}(),Object.assign(t,{set:a,snapshot:i,restore:u,resetTransforms:s}),{set:a,snapshot:i,restore:u,resetTransforms:s}}function De(t,e){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},De(t,e)}function Fe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Fe=function(){return!!t})()}function Be(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||qe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(n),!0).forEach(function(e){Ue(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ue(t,e,n){return(e=$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function We(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=qe(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ye(t){return function(t){if(Array.isArray(t))return Ve(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||qe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(t,e){if(t){if("string"==typeof t)return Ve(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(t,e):void 0}}function Ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ge(t){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ge(t)}function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$e(r.key),r)}}function $e(t){var e=function(t){if("object"!=Ge(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ge(e)?e:e+""}function Ke(t,e,n){Ze(t,e),e.set(t,n)}function Ze(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Je(t,e){return t.get(tn(t,e))}function Qe(t,e,n){return t.set(tn(t,e),n),n}function tn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var en="###",nn="tag",rn=["this","push","ph"],on=new WeakMap,an=new WeakMap,un=new WeakMap,sn=new WeakMap,cn=new WeakMap,ln=new WeakMap,fn=new WeakMap,hn=new WeakMap,pn=new WeakMap,yn=new WeakMap,vn=new WeakMap,dn=new WeakMap,mn=new WeakSet,bn=function(){return function(t,e){return e&&He(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){Ze(t,e),e.add(t)}(this,mn),Ke(this,on,!1),Ke(this,an,void 0),Ke(this,un,void 0),Ke(this,sn,void 0),Ke(this,cn,void 0),Ke(this,ln,void 0),Ke(this,fn,void 0),Ke(this,hn,void 0),Ke(this,pn,void 0),Ke(this,yn,void 0),Ke(this,vn,void 0),Ke(this,dn,void 0),Qe(hn,this,e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Qe(pn,this,r),Qe(sn,this,this.processTagData()),Qe(un,this,this.becomeDOM()),Qe(ln,this,!1),Qe(an,this,null),Qe(cn,this,null),Qe(on,this,!1),Qe(vn,this,!1),Qe(dn,this,new Map)},[{key:"logMap",value:function(){return Qe(vn,this,!0),this}},{key:"getManager",value:function(t,e){if(Je(dn,this).has(t))return Je(dn,this).get(t);if(e){var n=e();return Je(dn,this).set(t,n),n}return null}},{key:"hasManager",value:function(t){return Je(dn,this).has(t)}},{key:"setManager",value:function(t,e){Je(dn,this).set(t,e)}},{key:"cleanUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.keepMarkup,n=void 0!==e&&e,r=t.keepRaw,o=void 0!==r&&r,i=t.keepData,a=void 0!==i&&i,u=t.keepMap,s=void 0!==u&&u;n||Qe(un,this,null),o||Qe(hn,this,null),a||(Qe(sn,this,null),Qe(pn,this,null)),s||Qe(cn,this,null)}},{key:"processTagData",value:function(){var t=this,e=Je(hn,this).slice(0,-1),n="";return Je(pn,this).map(function(r,o){n+=e.shift();var i="content",a=!1,u=tn(mn,t,gn).call(t,n);/<\s*$/.test(n)?i=nn:/=\s*$/.test(n)?(a=!0,i="unquoted-value"):/=\s*["']\s*$/.test(n)?(a=!1,i="quoted-value"):/<\/\s*$/.test(n)&&(i=nn);var s=tn(mn,t,wn).call(t,u,o),c=a?'"'.concat(s,'"'):s,l=null!==r&&("object"===Ge(r)||"function"==typeof r);return{context:i,value:r,replacement:i===nn?r:c,needsPlaceholder:l,parentType:u}})}},{key:"becomeDOM",value:function(){return function(t){for(var e=t.childNodes,n=0;n<2;n++)e[n]&&3===e[n].nodeType&&""===e[n].textContent.trim()&&t.removeChild(e[n]);return t}(function(t){var e=t.trimStart();if(/^<tr\b/i.test(e)){var n=document.createElement("tbody");return n.innerHTML=t,n}if(/^<(td|th)\b/i.test(e)){var r=document.createElement("tr");return r.innerHTML=t,r}var o=document.createElement("div");return o.innerHTML=t,o}(String.raw.apply(String,[{raw:Je(hn,this)}].concat(Ye(Je(sn,this).map(function(t){var e=t.value,n=t.needsPlaceholder,r=t.replacement;return n?r:null!=e?e:""}))))))}},{key:"const",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.keepRaw,n=void 0!==e&&e,o=t.keepMarkup,i=void 0!==o&&o,a=t.keepData,u=void 0!==a&&a,s=t.keepMap,c=void 0!==s&&s,l=t.mutationObserver,f=void 0!==l&&l;if(Je(on,this))return this;Qe(cn,this,this.mapEverything()),Je(vn,this)&&console.log("ZyXHTML: map",Je(cn,this),{this:this}),this.replaceDOMPlaceholders();var h,p=We(Je(cn,this).phs);try{for(p.s();!(h=p.n()).done;){var y=h.value,v=y.node,d=y.ph;v.setAttribute("ph",d),this.thisAssigner(v,d),this.markAttributeProcessed(v,"ph",d)}}catch(t){p.e(t)}finally{p.f()}var m,b=We(Je(cn,this).hasThis);try{for(b.s();!(m=b.n()).done;){var g=m.value,w=g.node,k=g.key;this.thisAssigner(w,k),this.markAttributeProcessed(w,"this",k)}}catch(t){b.e(t)}finally{b.f()}var S,O=We(Je(cn,this).hasPush);try{for(O.s();!(S=O.n()).done;){var x=S.value,j=x.node,E=x.key;this.pushAssigner(j,E),this.markAttributeProcessed(j,"push",E)}}catch(t){O.e(t)}finally{O.f()}var P,T=We(Je(cn,this).hasId);try{for(T.s();!(P=T.n()).done;){var A=P.value,_=A.node,M=A.id;this.thisAssigner(_,M)}}catch(t){T.e(t)}finally{T.f()}var C,I=We(Je(cn,this).zyxBindAttributes);try{for(I.s();!(C=I.n()).done;){var L=C.value,R=L.node,N=L.attr,D=L.data,F=En[N];try{F({zyxhtml:this,node:R,data:D}),this.markAttributeProcessed(R,N)}catch(t){console.error(t),console.error("ZyXHTML: Error binding attribute",{attr:N,node:R,handler:F,data:D}),this.markAttributeProcessed(R,"errored-".concat(N),t)}}}catch(t){I.e(t)}finally{I.f()}var B,z,X,U,W=We(Je(cn,this).zyxDynamicVars);try{for(W.s();!(B=W.n()).done;){var Y=B.value,q=Y.node,V=Y.attr;Y.data.createZyXHTMLReactiveNode(this,q,V),this.markAttributeProcessed(q,V)}}catch(t){W.e(t)}finally{W.f()}return!this.main&&Je(un,this).firstElementChild&&(this.thisAssigner(Je(un,this).firstElementChild,"main"),this.markAttributeProcessed(Je(un,this).firstElementChild,"main")),Qe(an,this,Je(un,this).childNodes.length>1?(z=Je(un,this),(X=(U=document.createElement("template")).content).append.apply(X,function(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(z.childNodes)),U):Je(un,this)),Qe(ln,this,Je(an,this)instanceof HTMLTemplateElement),Je(ln,this)?Qe(an,this,Je(an,this).content):Qe(an,this,Je(an,this).firstElementChild),f&&this.setupSelfMutationObserver(),this.cleanUp({keepMarkup:i,keepRaw:n,keepData:u,keepMap:c}),Qe(on,this,!0),this}},{key:"mapEverything",value:function(){var t,e=Ye(Je(un,this).querySelectorAll("*")),n={placeholders:[],hasThis:[],hasId:[],zyxBindAttributes:[],zyxDynamicVars:[],phs:[],hasPush:[]},r=We(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.matches(o)){var u=i.getAttribute("id");if(u){var s,c,l,f=null===(s=Je(sn,this)[u])||void 0===s?void 0:s.value,p=null!==(c=null===(l=Je(sn,this)[u])||void 0===l?void 0:l.parentType)&&void 0!==c?c:null;n.placeholders.push({node:i,phid:u,dataValue:f,parentType:p})}}else if("OPTION"!==i.tagName&&"TR"!==i.tagName&&"TD"!==i.tagName||!i.hasAttribute("data-ph-id"))if(i.hasAttribute("ph"))n.phs.push({node:i,ph:i.getAttribute("ph")});else if(i.hasAttribute("this")&&n.hasThis.push({node:i,key:i.getAttribute("this")}),i.hasAttribute("push"))n.hasPush.push({node:i,key:i.getAttribute("push")});else{i.hasAttribute("id")&&n.hasId.push({node:i,id:i.getAttribute("id")});for(var y=0,v=Ye(i.attributes);y<v.length;y++){var d,m=v[y],b=a(m.value),g=null===(d=Je(sn,this)[b])||void 0===d?void 0:d.value;m.name in En&&n.zyxBindAttributes.push({node:i,attr:m.name,data:g}),g&&g instanceof h&&n.zyxDynamicVars.push({node:i,attr:m.name,data:g})}}else{var w=i.getAttribute("data-ph-id");if(w){var k,S,O,x=null===(k=Je(sn,this)[w])||void 0===k?void 0:k.value,j=null!==(S=null===(O=Je(sn,this)[w])||void 0===O?void 0:O.parentType)&&void 0!==S?S:null;n.placeholders.push({node:i,phid:w,dataValue:x,parentType:j})}}}}catch(t){r.e(t)}finally{r.f()}return Xe({all:e},n)}},{key:"replaceDOMPlaceholders",value:function(){var t;if(null!==(t=Je(cn,this))&&void 0!==t&&null!==(t=t.placeholders)&&void 0!==t&&t.length){var e,n=We(Je(cn,this).placeholders);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=r.node,i=r.dataValue,a=r.parentType;try{if(i instanceof h)i.createZyXHTMLReactiveNode(this,o,null);else{var u=On(i),s=o.parentElement;tn(mn,this,kn).call(this,a)?tn(mn,this,Sn).call(this,s,o,u):o.replaceWith(u)}}catch(t){console.error("Error replacing DOM placeholder:",t)}}}catch(t){n.e(t)}finally{n.f()}}}},{key:"setupSelfMutationObserver",value:function(){Qe(yn,this,new MutationObserver(function(t){})),Je(yn,this).observe(Je(an,this),{childList:!0,subtree:!0})}},{key:"thisAssigner",value:function(t,e){if(t&&e)try{var n=e.split(" ");if(1===n.length){var r=n[0];t.__key__=r,this[r]=t,Je(fn,this)&&(Je(fn,this)[r]=t)}else{var o=Be(n,2),i=o[0],a=o[1];this[i]||(this[i]={}),this[i][a]=t,Je(fn,this)&&(Je(fn,this)[i]||(Je(fn,this)[i]={}),Je(fn,this)[i][a]=t),t.__group__=i,t.__key__=a}}catch(t){console.error("Error in thisAssigner:",t)}}},{key:"pushAssigner",value:function(t,e){this[e]||(this[e]=[]),this[e].push(t),Je(fn,this)&&(Je(fn,this)[e]||(Je(fn,this)[e]=[]),Je(fn,this)[e].push(t))}},{key:"markAttributeProcessed",value:function(t,e,n){rn.includes(e)?t.removeAttribute(e):t.setAttribute("".concat(e,"-processed"),n||""),t.setAttribute(e,"")}},{key:"getDataByPlaceholderId",value:function(t){var e,n;return null!==(e=null===(n=Je(sn,this))||void 0===n||null===(n=n[t])||void 0===n?void 0:n.value)&&void 0!==e?e:null}},{key:"markup",get:function(){return Je(an,this.const())}},{key:"appendTo",value:function(t){return t.append(this.markup),this}},{key:"prependTo",value:function(t){return t.prepend(this.markup),this}},{key:"place",value:function(t){return function(t,e){if("object"===n(e))return e.replaceWith(t);var r=document.querySelector("ph[".concat(e,"]"));if(!r)throw new Error("".concat(e," not found"));r.replaceWith(t)}(this.markup,t),this}},{key:"bind",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qe(fn,this,t),t[en]=this,t.appendTo=function(t){return e.appendTo(t)},t.prependTo=function(t){return e.prependTo(t)},t.place=function(t){return e.place(t)},this.const(n)}},{key:"join",value:function(t){return Qe(fn,this,t),null!=t&&t[en]&&Object.assign(this,t[en]),this.const()}},{key:"touch",value:function(t){return console.warn("ZyXHTML: touch is deprecated"),t({proxy:this,markup:this.markup}),this}},{key:"getRadioViewManager",value:function(){var t=this;return this.getManager("radioView",function(){return new Ae(t)})}},{key:"radioViewSelect",value:function(t,e){this.getRadioViewManager().select(t,e)}},{key:"radioViewSelected",value:function(t){return this.getRadioViewManager().getSelected(t)}},{key:"onRadioViewChange",value:function(t,e){return this.getRadioViewManager().subscribe(t,e)}},{key:"radioViewRegisterControl",value:function(t,e,n){this.getRadioViewManager().registerControl(t,e,n)}},{key:"radioViewRegisterPanel",value:function(t,e,n){this.getRadioViewManager().registerPanel(t,e,n)}}])}();function gn(t){for(var e,n=[],r=/<\/?([a-zA-Z][a-zA-Z0-9-]*)\b[^>]*\/?>/g;null!==(e=r.exec(t));){var o=e[0],i=e[1].toLowerCase(),a=o.startsWith("</");if(!o.endsWith("/>")&&!o.endsWith("/ >"))if(a){var u=n.lastIndexOf(i);-1!==u&&n.splice(u,1)}else n.push(i)}return n.length>0?n[n.length-1]:null}function wn(t,e){switch(t){case"select":return"<option data-ph-id='".concat(e,"'></option>");case"table":return"<tr data-ph-id='".concat(e,"'></tr>");case"tr":return"<td data-ph-id='".concat(e,"'></td>");default:return i(e)}}function kn(t){return"select"===t||"table"===t||"tr"===t}function Sn(t,e,n){if(t)if(n instanceof DocumentFragment){var r=Array.from(n.childNodes);0===r.length?e.remove():(e.remove(),t.append.apply(t,r))}else{if(n instanceof Element||n instanceof Text)return e.remove(),void t.append(n);e.remove()}else e.replaceWith(n)}function On(t){return!1===t||null==t?"":Array.isArray(t)?(e=t,r=document.createElement("template"),(n=r.content).append.apply(n,Ye(e.map(On))),r).content:"function"==typeof t?On(t()):(null==t?void 0:t[en])instanceof bn?t[en].markup:t instanceof bn?t.markup:t instanceof HTMLTemplateElement?t.content:t;var e,n,r}bn.prototype.super=bn.prototype.join;var xn,jn,En=Xe(Xe(Xe(Xe(Xe(Xe({},C),I),et),oe),{"zyx-radioview":function(t){var e=t.zyxhtml,n=t.node,r=function(t){if(!t||"string"!=typeof t)return null;var e=t.split(".");if(e.length<2)return null;var n="open"===e[2]||e.includes("open");return{ns:e[0],view:e[1],isControl:n}}(n.getAttribute("zyx-radioview")||"");if(r){var o=r.ns,i=r.view;r.isControl?e.radioViewRegisterControl(o,i,n):e.radioViewRegisterPanel(o,i,n)}}}),{},{"zyx-insert-n":function(t){for(var e=t.zyxhtml,n=t.node,r=Be(t.data,2),o=r[0],i=r[1],a=0;a<o;a++)n.append(On(i(e,a,o)))},"zyx-insert-entries":function(t){for(var e=t.zyxhtml,n=t.node,r=Be(t.data,3),o=r[0],i=r[1],a=r[2],u=0,s=Object.entries(o);u<s.length;u++){var c=Be(s[u],2),l=i(e,c[0],c[1]);if(n.append(On(l)),a)if("string"==typeof a)e.pushAssigner(l,a);else{if(!Array.isArray(a))throw new Error("Invalid groupname");a.push(l)}}},"zyx-transform":function(t){var e=t.node,n=t.data;e.zyxTrans=Ne(e,null==n?void 0:n.map)},"zyx-shadowroot":function(t){!function(t){var e,n=t.node;if(!n.shadow){n.shadow=n.attachShadow({mode:"open"});var r=document.createElement("style");(e=n.shadow).append.apply(e,j(n.childNodes)),n.shadow.append(r),n.loadCSS=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){x(i,r,o,a,u,"next",t)}function u(t){x(i,r,o,a,u,"throw",t)}a(void 0)})}}(y().mark(function t(e){var r,o,i,a;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!Array.isArray(e)){t.next=19;break}r=O(e),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=10;break}return i=o.value,t.next=8,n.loadCSS(i);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:return t.abrupt("return");case 19:return(a=document.createElement("link")).rel="stylesheet",a.type="text/css",a.href=e,t.next=25,new Promise(function(t,e){a.onload=function(){return t()},a.onerror=e,n.shadow.appendChild(a)});case 25:case"end":return t.stop()}},t,null,[[2,12,15,18]])}));return function(e){return t.apply(this,arguments)}}(),n.removeAttribute("zyx-shadowroot")}}({node:t.node})}});function Pn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,e,n){if(Fe())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&De(o,n.prototype),o}(bn,e)}function Tn(){var t=Ln(),e=t.m(Tn),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,An(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(Tn=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new Nn(t,e)},AsyncIterator:In,async:function(t,e,n,o,a){return(r(e)?Cn:Mn)(i(t),e,n,o,a)},keys:_n,values:An}})()}function An(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Dn(t)+" is not iterable")}function _n(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Mn(t,e,n,r,o){var i=Cn(t,e,n,r,o);return i.next().then(function(t){return t.done?t.value:i.next()})}function Cn(t,e,n,r,o){return new In(Ln().w(t,e,n,r),o||Promise)}function In(t,e){function n(r,o,i,a){try{var u=t[r](o),s=u.value;return s instanceof Nn?e.resolve(s.v).then(function(t){n("next",t,i,a)},function(t){n("throw",t,i,a)}):e.resolve(s).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,a)})}catch(t){a(t)}}var r;this.next||(Rn(In.prototype),Rn(In.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Rn(this,"_invoke",function(t,o,i){function a(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(a,a):a()},!0)}function Ln(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Rn(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,u=0,s=t,h.n=n,a}};function p(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=h.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,h.v=r,h.n=i[1]):p<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,h.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,y),u=l,s=y;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(h.n=-1),p(u,s)):h.n=s:h.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Rn(e={},r,function(){return this}),e),f=c.prototype=u.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Rn(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,Rn(f,"constructor",c),Rn(c,"constructor",s),s.displayName="GeneratorFunction",Rn(c,o,"GeneratorFunction"),Rn(f),Rn(f,o,"Generator"),Rn(f,r,function(){return this}),Rn(f,"toString",function(){return"[object Generator]"}),(Ln=function(){return{w:i,m:h}})()}function Rn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Rn=function(t,e,n,r){function i(e,n){Rn(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Rn(t,e,n,r)}function Nn(t,e){this.v=t,this.k=e}function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function Fn(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Bn(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Fn(i,r,o,a,u,"next",t)}function u(t){Fn(i,r,o,a,u,"throw",t)}a(void 0)})}}function zn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Xn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Wn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(e){Yn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Yn(t,e,n){return(e=function(t){var e=function(t){if("object"!=Dn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.form?Gn(t,e,n):fetch(t,Wn({headers:new Headers({"Content-Type":"application/json"}),method:"POST",credentials:"include",body:JSON.stringify(e)},n))}function Vn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(t,Wn({headers:new Headers({"Content-Type":"application/json"}),method:"GET",credentials:"include"},e))}function Gn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new FormData;return Object.entries(e).forEach(function(t){var e=zn(t,2),n=e[0],o=e[1];return r.append(n,o)}),fetch(t,Wn({method:"POST",credentials:"include",body:r},n))}function Hn(t){return new Promise(function(e,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onload=function(){r.remove(),e({link:r,remove:function(){return r.remove()}})},r.onerror=n,r.href=t,document.head.appendChild(r)})}function $n(t){return Kn.apply(this,arguments)}function Kn(){return(Kn=Bn(Tn().mark(function t(e){var n,r,o;return Tn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if(!(n=t.sent).ok){t.next=11;break}return t.next=6,n.blob();case 6:return r=t.sent,o=URL.createObjectURL(r),t.abrupt("return",{blob:r,objectURL:o});case 11:throw new Error("Blob fetch failed");case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Zn(t){return Jn.apply(this,arguments)}function Jn(){return(Jn=Bn(Tn().mark(function t(e){return Tn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src=e}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Qn(t,e){return tr.apply(this,arguments)}function tr(){return(tr=Bn(Tn().mark(function t(e,n){var r,o,i,a,u,s,c;return Tn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zn(e);case 2:return r=t.sent,n=n||512,o=document.createElement("canvas"),i=o.getContext("2d"),a=er(r.width,r.height,n),u=zn(a,2),s=u[0],c=u[1],o.width=s,o.height=c,i.drawImage(r,0,0,s,c),t.abrupt("return",o);case 11:case"end":return t.stop()}},t)}))).apply(this,arguments)}function er(t,e,n){if(t>n||e>n){var r=n/Math.max(t,e);return[t*r,e*r]}return[t,e]}function nr(t){var e=t.replace(/^.*[\\\/]/,"").split("?")[0];return{filename:e,ext:e.split(".").pop()}}function rr(t){return or.apply(this,arguments)}function or(){return or=Bn(Tn().mark(function t(e){var n,r,o=arguments;return Tn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.next=3,fetch(e,Wn({headers:new Headers({"Content-Type":"application/json"}),credentials:"include"},n));case 3:if((r=t.sent).ok){t.next=6;break}throw new Error("Request failed with status ".concat(r.status));case 6:return t.abrupt("return",r.json());case 7:case"end":return t.stop()}},t)})),or.apply(this,arguments)}function ir(t,e){return fetch(t,{headers:new Headers({"Content-Type":"application/json"}),method:"PUT",credentials:"include",body:JSON.stringify(e)})}function ar(t){return fetch(t,{headers:new Headers({"Content-Type":"application/json"}),method:"DELETE",credentials:"include"})}function ur(t){return sr.apply(this,arguments)}function sr(){return(sr=Bn(Tn().mark(function t(e){return Tn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var r=document.createElement("script");r.src=e,r.onload=function(){return t(r)},r.onerror=n,document.head.appendChild(r)}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function cr(t){return lr.apply(this,arguments)}function lr(){return lr=Bn(Tn().mark(function t(e){var n,r=arguments;return Tn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Blob([e],{type:r.length>1&&void 0!==r[1]?r[1]:"application/octet-stream"}),t.abrupt("return",{blob:n,objectURL:URL.createObjectURL(n)});case 3:case"end":return t.stop()}},t)})),lr.apply(this,arguments)}function fr(t){return hr.apply(this,arguments)}function hr(){return hr=Bn(Tn().mark(function t(e){var n,r,o,i,a,u=arguments;return Tn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=u.length>2&&void 0!==u[2]?u[2]:5e3,o=new AbortController,i=setTimeout(function(){return o.abort()},r),t.prev=4,t.next=7,fetch(e,Wn(Wn({},n),{},{signal:o.signal}));case 7:return a=t.sent,t.abrupt("return",a);case 9:return t.prev=9,clearTimeout(i),t.finish(9);case 12:case"end":return t.stop()}},t,null,[[4,,9,12]])})),hr.apply(this,arguments)}function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function yr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return vr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function dr(){var t=Sr(),e=t.m(dr),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,mr(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(dr=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new xr(t,e)},AsyncIterator:kr,async:function(t,e,n,o,a){return(r(e)?wr:gr)(i(t),e,n,o,a)},keys:br,values:mr}})()}function mr(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(pr(t)+" is not iterable")}function br(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function gr(t,e,n,r,o){var i=wr(t,e,n,r,o);return i.next().then(function(t){return t.done?t.value:i.next()})}function wr(t,e,n,r,o){return new kr(Sr().w(t,e,n,r),o||Promise)}function kr(t,e){function n(r,o,i,a){try{var u=t[r](o),s=u.value;return s instanceof xr?e.resolve(s.v).then(function(t){n("next",t,i,a)},function(t){n("throw",t,i,a)}):e.resolve(s).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,a)})}catch(t){a(t)}}var r;this.next||(Or(kr.prototype),Or(kr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Or(this,"_invoke",function(t,o,i){function a(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(a,a):a()},!0)}function Sr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Or(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,u=0,s=t,h.n=n,a}};function p(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=h.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,h.v=r,h.n=i[1]):p<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,h.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,y),u=l,s=y;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(h.n=-1),p(u,s)):h.n=s:h.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Or(e={},r,function(){return this}),e),f=c.prototype=u.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Or(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,Or(f,"constructor",c),Or(c,"constructor",s),s.displayName="GeneratorFunction",Or(c,o,"GeneratorFunction"),Or(f),Or(f,o,"Generator"),Or(f,r,function(){return this}),Or(f,"toString",function(){return"[object Generator]"}),(Sr=function(){return{w:i,m:h}})()}function Or(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Or=function(t,e,n,r){function i(e,n){Or(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Or(t,e,n,r)}function xr(t,e){this.v=t,this.k=e}function jr(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Er(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){jr(i,r,o,a,u,"next",t)}function u(t){jr(i,r,o,a,u,"throw",t)}a(void 0)})}}function Pr(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ar(r.key),r)}}function Ar(t){var e=function(t){if("object"!=pr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pr(e)?e:e+""}var _r=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).root;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pn(xn||(xn=Pr([' <styles this="styles"></styles> ']))).bind(this),e&&this.appendTo(e)}return function(t,e){return e&&Tr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"loadUrl",value:(n=Er(dr().mark(function t(e){var n,r,o;return dr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Hn(e);case 2:return n=t.sent,r=n.link,o=n.remove,this.styles.appendChild(r),t.abrupt("return",{link:r,remove:o});case 7:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"str",value:(e=Er(dr().mark(function t(e){var n,r,o,i,a,u,s,c,l=arguments;return dr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=l.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=l[o];if(i=String.raw.apply(String,[e].concat(r)),!String(i).startsWith("url(")){t.next=22;break}a=i.split("url(").slice(1).map(function(t){return t.split(")")[0]}),u=yr(a),t.prev=5,u.s();case 7:if((s=u.n()).done){t.next=13;break}return c=s.value,t.next=11,this.loadUrl(c);case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),u.e(t.t0);case 18:return t.prev=18,u.f(),t.finish(18);case 21:return t.abrupt("return");case 22:return t.abrupt("return",Pn(jn||(jn=Pr(['<style this="style">',"</style>"])),i).appendTo(this.styles));case 23:case"end":return t.stop()}},t,this,[[5,15,18,21]])})),function(t){return e.apply(this,arguments)})},{key:"cloneType",value:function(e){return new t({root:e})}}]);var e,n}(),Mr=new _r({root:"undefined"!=typeof document&&document.head});function Cr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Mr.str.apply(Mr,[t].concat(n))}function Ir(t){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function Lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rr(r.key),r)}}function Rr(t){var e=function(t){if("object"!=Ir(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ir(e)?e:e+""}var Nr=function(){return function(t,e){return e&&Lr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},[{key:"get",value:function(t,e){var n=t+"=",r=decodeURIComponent(document.cookie),o=r.split(";");if(!r.includes(t))return this.set(t,e),e;for(var i in o){for(var a=o[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(n)){var u=a.substring(n.length,a.length);return"true"===u||"false"===u?"true"===u:u}}return""}},{key:"set",value:function(t,e,n){var r=new Date;n?r.setTime(r.getTime()+24*n*60*60*1e3):r.setTime(r.getTime()+8639136e5);var o="expires="+r.toUTCString();document.cookie="".concat(t,"=").concat(e,";").concat(o,";path=/")}},{key:"delete",value:function(t){console.log("deleting cookie",t),this.set(t,"",-1)}}])}(),Dr=new Nr;function Fr(t){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fr(t)}function Br(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return zr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Xr(){var t=Gr(),e=t.m(Xr),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,Ur(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(Xr=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new $r(t,e)},AsyncIterator:Vr,async:function(t,e,n,o,a){return(r(e)?qr:Yr)(i(t),e,n,o,a)},keys:Wr,values:Ur}})()}function Ur(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Fr(t)+" is not iterable")}function Wr(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Yr(t,e,n,r,o){var i=qr(t,e,n,r,o);return i.next().then(function(t){return t.done?t.value:i.next()})}function qr(t,e,n,r,o){return new Vr(Gr().w(t,e,n,r),o||Promise)}function Vr(t,e){function n(r,o,i,a){try{var u=t[r](o),s=u.value;return s instanceof $r?e.resolve(s.v).then(function(t){n("next",t,i,a)},function(t){n("throw",t,i,a)}):e.resolve(s).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,a)})}catch(t){a(t)}}var r;this.next||(Hr(Vr.prototype),Hr(Vr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Hr(this,"_invoke",function(t,o,i){function a(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(a,a):a()},!0)}function Gr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Hr(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,u=0,s=t,h.n=n,a}};function p(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=h.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,h.v=r,h.n=i[1]):p<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,h.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,y),u=l,s=y;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(h.n=-1),p(u,s)):h.n=s:h.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Hr(e={},r,function(){return this}),e),f=c.prototype=u.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Hr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,Hr(f,"constructor",c),Hr(c,"constructor",s),s.displayName="GeneratorFunction",Hr(c,o,"GeneratorFunction"),Hr(f),Hr(f,o,"Generator"),Hr(f,r,function(){return this}),Hr(f,"toString",function(){return"[object Generator]"}),(Gr=function(){return{w:i,m:h}})()}function Hr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Hr=function(t,e,n,r){function i(e,n){Hr(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Hr(t,e,n,r)}function $r(t,e){this.v=t,this.k=e}function Kr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kr(Object(n),!0).forEach(function(e){Jr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Jr(t,e,n){return(e=oo(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qr(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function to(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Qr(i,r,o,a,u,"next",t)}function u(t){Qr(i,r,o,a,u,"throw",t)}a(void 0)})}}function eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function no(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oo(r.key),r)}}function ro(t,e,n){return e&&no(t.prototype,e),n&&no(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oo(t){var e=function(t){if("object"!=Fr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fr(e)?e:e+""}function io(t,e,n){ao(t,e),e.set(t,n)}function ao(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function uo(t,e){return t.get(co(t,e))}function so(t,e,n){return t.set(co(t,e),n),n}function co(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function lo(t){if((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&t<0)throw new Error("Sleep duration cannot be negative");return new Promise(function(e){return setTimeout(e,Math.max(0,t))})}var fo=new WeakMap,ho=new WeakMap,po=new WeakMap,yo=new WeakMap,vo=new WeakSet,mo=function(){return ro(function t(e){var n=e.url,r=e.type,o=void 0===r?"module":r,i=e.errorHandler,a=void 0===i?console.error:i;eo(this,t),function(t,e){ao(t,e),e.add(t)}(this,vo),io(this,fo,void 0),io(this,ho,void 0),io(this,po,void 0),io(this,yo,void 0),so(fo,this,new Worker(n,{type:o})),so(ho,this,new Map),so(po,this,new Map),so(yo,this,a),uo(fo,this).onmessage=co(vo,this,bo).bind(this),uo(fo,this).onerror=co(vo,this,go).bind(this)},[{key:"on",value:function(t,e){var n=this;return uo(po,this).has(t)||uo(po,this).set(t,new Set),uo(po,this).get(t).add(e),function(){return n.off(t,e)}}},{key:"off",value:function(t,e){var n=uo(po,this).get(t);n&&n.delete(e)}},{key:"execute",value:(t=to(Xr().mark(function t(e){var n,r,o=this;return Xr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=crypto.randomUUID(),r=new Promise(function(t,e){uo(ho,o).set(n,{resolve:t,reject:e})}),uo(fo,this).postMessage(Zr(Zr({},e),{},{taskId:n})),t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)})),function(e){return t.apply(this,arguments)})},{key:"terminate",value:function(){uo(fo,this).terminate(),uo(ho,this).clear(),uo(po,this).clear()}}]);var t}();function bo(t){var e=this,n=t.data,r=n.taskId,o=n.error,i=n.data;if("event"!==n.type){var a=uo(ho,this).get(r);a&&(uo(ho,this).delete(r),o?a.reject(new Error(o)):a.resolve(i))}else{var u=uo(po,this).get(i.event);u&&u.forEach(function(t){try{t(i.payload)}catch(t){uo(yo,e).call(e,t)}})}}function go(t){uo(yo,this).call(this,t)}var wo=new WeakMap,ko=new WeakMap,So=function(){return ro(function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.delay,o=void 0===r?1:r,i=n.immediate,a=void 0!==i&&i;eo(this,t),io(this,wo,void 0),io(this,ko,void 0),so(wo,this,!1),so(ko,this,new Promise(function(t,n){var r=function(){var r=to(Xr().mark(function r(){return Xr().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,"function"!=typeof e.asyncInit){r.next=4;break}return r.next=4,e.asyncInit();case 4:so(wo,e,!0),t(),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),n(r.t0);case 11:case"end":return r.stop()}},r,null,[[0,8]])}));return function(){return r.apply(this,arguments)}}();a?queueMicrotask(r):setTimeout(r,o)}))},[{key:"isInitialized",get:function(){return uo(wo,this)}},{key:"waitForInit",value:(t=to(Xr().mark(function t(){return Xr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,uo(ko,this);case 2:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]);var t}(),Oo=new WeakMap,xo=new WeakMap,jo=function(){return ro(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.delay,r=void 0===n?1:n,o=e.microtask,i=void 0!==o&&o;eo(this,t),io(this,Oo,void 0),io(this,xo,void 0),so(Oo,this,r),so(xo,this,i),this.callAsyncConstructor()},[{key:"callAsyncConstructor",value:function(){var t=this;"function"==typeof(null==this?void 0:this.asynConstructor)?uo(xo,this)?queueMicrotask(function(e){return t.asynConstructor()}):setTimeout(function(e){return t.asynConstructor()},uo(Oo,this)):console.warn("you are using a (new AsynConstructor()) class without an async asynConstructor method.")}}])}();function Eo(t,e,n){return Po.apply(this,arguments)}function Po(){return Po=to(Xr().mark(function t(e,n,r){var o,i,a,u,s;return Xr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=[],i=new Set,a=Br(n),t.prev=3,s=Xr().mark(function t(){var a,s,c;return Xr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=u.value,s=Promise.resolve().then(function(){return r(a,n)}),o.push(s),!(e<=n.length)){t.next=9;break}if(c=s.then(function(){return i.delete(c)}),i.add(c),!(i.size>=e)){t.next=9;break}return t.next=9,Promise.race(i);case 9:case"end":return t.stop()}},t)}),a.s();case 6:if((u=a.n()).done){t.next=10;break}return t.delegateYield(s(),"t0",8);case 8:t.next=6;break;case 10:t.next=15;break;case 12:t.prev=12,t.t1=t.catch(3),a.e(t.t1);case 15:return t.prev=15,a.f(),t.finish(15);case 18:return t.abrupt("return",Promise.all(o));case 19:case"end":return t.stop()}},t,null,[[3,12,15,18]])})),Po.apply(this,arguments)}function To(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ao(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ao(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ao(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var _o=new WeakMap;"undefined"!=typeof window&&(window.zyxMap=_o);var Mo=function(t,e){var n=_o.get(t);return n||(_o.set(t,{banks:{}}),n=_o.get(t)),e in n.banks||(n.banks[e]={}),n.banks[e]};function Co(t,e){var n=Mo(t,"delayChains");if(e in n){var r,o=To(n[e].pending);try{for(o.s();!(r=o.n()).done;){var i=r.value;clearTimeout(i)}}catch(t){o.e(t)}finally{o.f()}n[e].pending=[],n[e].callbacks=[]}else n[e]={callbacks:[],pending:[]};var a=function(){return n[e].callbacks.length>0&&n[e].callbacks.splice(0,1)[0]()};return n[e].pending.push(setTimeout(a,1)),function t(){return{then:function(r,o){return n[e].callbacks.push(function(){n[e].pending.push(setTimeout(function(t){r(),a()},o))}),t()}}}()}function Io(t,e){var n=Mo(t,"delayChains");if(e in n){var r,o=To(n[e].pending);try{for(o.s();!(r=o.n()).done;){var i=r.value;clearTimeout(i)}}catch(t){o.e(t)}finally{o.f()}n[e]={callbacks:[],pending:[]}}}function Lo(t,e,n,r){return new Promise(function(o,i){var a=Mo(t,"delays");e in a&&clearTimeout(a[e].timeout),n=n||0,a[e]=r?{func:r,timeout:setTimeout(function(){return o(r())},n)}:{func:r,timeout:setTimeout(o,n)}})}function Ro(t){for(var e,n=Mo(t,"delays"),r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(o.length>1)for(var a in o){var u;a in n&&clearTimeout(null===(u=n[a])||void 0===u?void 0:u.timeout)}else clearTimeout(null===(e=n[o[0]])||void 0===e?void 0:e.timeout)}function No(t,e){var n=Mo(t,"delays");e in n&&(clearTimeout(n[e].timeout),n[e].func())}function Do(t,e,n,r){var o=Mo(t,"debouncers");if(e in o)o[e](n);else{try{n(),n=null}catch(t){throw new Error(t)}setTimeout(function(t){try{n&&n()}catch(t){throw new Error(t)}delete o[e]},r),o[e]=function(t){return n=t}}}function Fo(t,e,n,r){var o=Mo(t,"throttlers");if(e in o){var i=Date.now();if(i-o[e].lastRun>=r){o[e].lastRun=i;try{n()}catch(t){throw new Error(t)}}}else{try{n()}catch(t){throw new Error(t)}o[e]={lastRun:Date.now(),func:n}}}function Bo(t){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function zo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uo(r.key),r)}}function Uo(t){var e=function(t){if("object"!=Bo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Bo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bo(e)?e:e+""}function Wo(t,e){return t.get(function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(t,e))}var Yo=new WeakMap,qo=function(){return function(t,e){return e&&Xo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(this,Yo,{})},[{key:"on",value:function(t,e){var n=this;if("string"!=typeof t)throw new TypeError("Event name must be a string");if("function"!=typeof e)throw new TypeError("Callback must be a function");t.includes(",")?t.split(",").forEach(function(t){return n.on(t.trim(),e)}):(t in Wo(Yo,this)||(Wo(Yo,this)[t]=[]),Wo(Yo,this)[t].push(e))}},{key:"call",value:function(t){if("string"!=typeof t)throw new TypeError("Event name must be a string");var e=Wo(Yo,this)[t];if(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i,a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return zo(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(e);try{for(a.s();!(i=a.n()).done;){var u=i.value;try{u.apply(void 0,r)}catch(e){console.error("Error in event handler for '".concat(t,"':"),e),this.call("error",e,t,r)}}}catch(t){a.e(t)}finally{a.f()}}}},{key:"off",value:function(t,e){var n=this;if("string"!=typeof t)throw new TypeError("Event name must be a string");t.includes(",")?t.split(",").forEach(function(t){return n.off(t.trim(),e)}):t in Wo(Yo,this)&&(e?Wo(Yo,this)[t]=Wo(Yo,this)[t].filter(function(t){return t!==e}):delete Wo(Yo,this)[t])}},{key:"listenerCount",value:function(t){var e;return(null===(e=Wo(Yo,this)[t])||void 0===e?void 0:e.length)||0}}])}();function Vo(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.split(" ").forEach(function(e){return t.addEventListener(e,n,r)})}function Go(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.split(" ").forEach(function(e){return t.removeEventListener(e,n,r)})}function Ho(t,e,n){return Math.min(Math.max(t,e),n)}function $o(t,e,n){return t+(e-t)*n}function Ko(t,e,n,r,o){return(t-e)*(o-r)/(n-e)+r}function Zo(t,e){return Math.max(0,(-e+t)/(1-e))}function Jo(t,e){return Math.min(1,t/e)}function Qo(t,e){return Math.round(t/e)*e}function ti(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function ei(t,e){return Math.floor(Math.random()*(e-t+1))+t}function ni(t,e,n){return ti(Math.random()*(e-t)+t,n)}function ri(t){return t%2==0}function oi(t){return t%2!=0}function ii(t){return Number.isInteger(t)}function ai(t){return!Number.isInteger(t)}function ui(t){return["up","right","down","left"][Math.round(t/90)%4]}function si(t){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(t)}function ci(){var t=vi(),e=t.m(ci),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,li(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(ci=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new mi(t,e)},AsyncIterator:yi,async:function(t,e,n,o,a){return(r(e)?pi:hi)(i(t),e,n,o,a)},keys:fi,values:li}})()}function li(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(si(t)+" is not iterable")}function fi(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function hi(t,e,n,r,o){var i=pi(t,e,n,r,o);return i.next().then(function(t){return t.done?t.value:i.next()})}function pi(t,e,n,r,o){return new yi(vi().w(t,e,n,r),o||Promise)}function yi(t,e){function n(r,o,i,a){try{var u=t[r](o),s=u.value;return s instanceof mi?e.resolve(s.v).then(function(t){n("next",t,i,a)},function(t){n("throw",t,i,a)}):e.resolve(s).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,a)})}catch(t){a(t)}}var r;this.next||(di(yi.prototype),di(yi.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),di(this,"_invoke",function(t,o,i){function a(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(a,a):a()},!0)}function vi(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return di(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,u=0,s=t,h.n=n,a}};function p(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=h.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,h.v=r,h.n=i[1]):p<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,h.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,y),u=l,s=y;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(h.n=-1),p(u,s)):h.n=s:h.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(di(e={},r,function(){return this}),e),f=c.prototype=u.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,di(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,di(f,"constructor",c),di(c,"constructor",s),s.displayName="GeneratorFunction",di(c,o,"GeneratorFunction"),di(f),di(f,o,"Generator"),di(f,r,function(){return this}),di(f,"toString",function(){return"[object Generator]"}),(vi=function(){return{w:i,m:h}})()}function di(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}di=function(t,e,n,r){function i(e,n){di(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},di(t,e,n,r)}function mi(t,e){this.v=t,this.k=e}function bi(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function gi(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){bi(i,r,o,a,u,"next",t)}function u(t){bi(i,r,o,a,u,"throw",t)}a(void 0)})}}function wi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ki(r.key),r)}}function ki(t){var e=function(t){if("object"!=si(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==si(e)?e:e+""}var Si=function(){return function(t,e){return e&&wi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.AUDIO_ROOT=e,this.ctx=new AudioContext,this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.ctx.destination),this.SOUNDS={},this.muted=!1,this.activeSources=new Set,this.backgroundMusic=null,this.backgroundMusicPosition=0,this.isChangingBackgroundMusic=!1,this.filters=null,this.filtersEnabled=!1},[{key:"setupFilters",value:function(){this.filters||(this.filters={lowpass:this.ctx.createBiquadFilter(),highpass:this.ctx.createBiquadFilter(),bandpass:this.ctx.createBiquadFilter()},this.filters.lowpass.type="lowpass",this.filters.highpass.type="highpass",this.filters.bandpass.type="bandpass",this.filters.lowpass.frequency.value=2e4,this.filters.highpass.frequency.value=20,this.filters.bandpass.frequency.value=1e3,this.filters.bandpass.Q.value=1,this.filters.lowpass.connect(this.filters.highpass),this.filters.highpass.connect(this.filters.bandpass),this.filters.bandpass.connect(this.gainNode))}},{key:"addSound",value:(a=gi(ci().mark(function t(e){var n=this;return ci().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){if(Object.keys(n.SOUNDS).includes(e))return t();var o=new XMLHttpRequest;o.onload=function(o){n.ctx.decodeAudioData(o.target.response,function(r){n.SOUNDS[e]=r,t(n.SOUNDS[e])},function(t){r(new Error("Failed to decode audio data: ".concat(t.message)))})},o.onerror=function(){return r(new Error("Failed to load audio file: ".concat(e)))},o.open("GET",n.AUDIO_ROOT+e,!0),o.responseType="arraybuffer",o.send()}));case 1:case"end":return t.stop()}},t)})),function(t){return a.apply(this,arguments)})},{key:"stop",value:function(t){t.stop&&t.stop(),t.disconnect&&t.disconnect(),this.activeSources.delete(t)}},{key:"toggleMute",value:function(){return this.muted=!this.muted,this.gainNode.gain.value=this.muted?0:1,this.muted}},{key:"createBuffer",value:function(t,e){var n=this,r=this.ctx.createBufferSource();return r.buffer=this.SOUNDS[t],this.filtersEnabled?(this.setupFilters(),r.connect(this.filters.lowpass)):r.connect(this.gainNode),e||(e=function(){n.stop(r)}),r.onended=function(){return e()},this.activeSources.add(r),r}},{key:"createAndExecute",value:function(t,e){return this.createBuffer(t,e).start(0)}},{key:"fadeVolume",value:(i=gi(ci().mark(function t(e){var n,r,o=arguments;return ci().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:1,this.gainNode.gain.value,r=this.ctx.currentTime,this.gainNode.gain.setTargetAtTime(Oi(e),r,n);case 4:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"playBackgroundMusic",value:(o=gi(ci().mark(function t(e){var n,r,o,i,a,u,s,c,l,f,h,p,y=arguments;return ci().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(n=y.length>1&&void 0!==y[1]?y[1]:{}).fadeIn,o=void 0===r?2:r,i=n.fadeOut,a=void 0===i?2:i,u=n.volume,s=void 0===u?.5:u,c=n.loop,l=void 0===c||c,!this.isChangingBackgroundMusic){t.next=5;break}return console.log("Already changing background music, ignoring new request"),t.abrupt("return");case 5:if(this.isChangingBackgroundMusic=!0,t.prev=6,!this.backgroundMusic){t.next=14;break}return console.log("Fading out background music",a),f=this.ctx.currentTime,this.gainNode.gain.setTargetAtTime(0,f,a/3),t.next=13,new Promise(function(t){return setTimeout(t,1e3*a)});case 13:this.backgroundMusic&&(this.stop(this.backgroundMusic),this.backgroundMusic=null);case 14:return t.next=16,this.addSound(e);case 16:return(h=this.ctx.createBufferSource()).buffer=this.SOUNDS[e],this.filtersEnabled?(this.setupFilters(),h.connect(this.filters.lowpass)):h.connect(this.gainNode),this.activeSources.add(h),h.loop=l,this.gainNode.gain.value=0,h.start(0),this.backgroundMusic=h,console.log("Fading in background music",o),p=this.ctx.currentTime,this.gainNode.gain.setTargetAtTime(Oi(s),p,o/3),t.next=29,new Promise(function(t){return setTimeout(t,1e3*o)});case 29:return t.prev=29,this.isChangingBackgroundMusic=!1,t.finish(29);case 32:case"end":return t.stop()}},t,this,[[6,,29,32]])})),function(t){return o.apply(this,arguments)})},{key:"setPlaybackRate",value:function(t,e){t&&t.playbackRate&&(t.playbackRate.value=e)}},{key:"setStereoPan",value:function(t,e){t&&t.pan&&(t.pan.value=Math.max(-1,Math.min(1,e)))}},{key:"setFilter",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.filters[t];r&&(r.frequency.value=e,r.Q.value=n)}},{key:"play",value:(r=gi(ci().mark(function t(){var e,n,r,o,i,a,u,s,c,l,f,h,p,y,v,d,m,b,g,w,k,S,O,x=this,j=arguments;return ci().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=j.length>0&&void 0!==j[0]?j[0]:{}).source,r=e.name,o=e.looping,i=void 0!==o&&o,a=e.delay,u=void 0===a?0:a,s=e.volume,c=void 0===s?1:s,l=e.n,f=void 0===l?0:l,h=e.playbackRate,p=void 0===h?1:h,y=e.pan,v=void 0===y?0:y,d=e.fadeIn,m=void 0===d?0:d,b=e.onEnded,g=void 0===b?null:b,t.next=3,this.addSound(r);case 3:if(0!==(c=this.muted?0:c)){t.next=6;break}return t.abrupt("return");case 6:if(this.gainNode.gain.value=m>0?0:Oi(c),!i&&!f){t.next=18;break}return i=!0,w=f-- >0,k=function t(){g&&g(),!i||w&&f--<=0?g&&w&&f<0&&g(!0):setTimeout(function(e){n=x.createAndExecute(r,t),x.setPlaybackRate(n,p),x.setStereoPan(n,v)},u)},n=this.createAndExecute(r,k),this.setPlaybackRate(n,p),this.setStereoPan(n,v),m>0&&this.fadeVolume(c,m),t.abrupt("return",{source:n,stop:function(){return i=!1},setPlaybackRate:function(t){return x.setPlaybackRate(n,t)},setPan:function(t){return x.setStereoPan(n,t)},setVolume:function(t){return x.fadeVolume(t)}});case 18:return S=function(){g&&g(),x.stop(O)},(O=this.createBuffer(r,S)).start(0),this.setPlaybackRate(O,p),this.setStereoPan(O,v),m>0&&this.fadeVolume(c,m),t.abrupt("return",O);case 25:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"stopAll",value:function(){var t=this;this.activeSources.forEach(function(e){return t.stop(e)})}},{key:"pauseAll",value:function(){this.activeSources.forEach(function(t){t.stop&&t.stop()})}},{key:"pauseBackgroundMusic",value:(n=gi(ci().mark(function t(){var e,n,r=arguments;return ci().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:.5,this.backgroundMusic&&!this.isChangingBackgroundMusic){t.next=3;break}return t.abrupt("return",!1);case 3:if(this.isChangingBackgroundMusic=!0,t.prev=4,this.backgroundMusicPosition=this.ctx.currentTime-this.backgroundMusic.startTime,!(e>0)){t.next=11;break}return n=this.ctx.currentTime,this.gainNode.gain.setTargetAtTime(0,n,e/3),t.next=11,new Promise(function(t){return setTimeout(t,1e3*e)});case 11:if("running"!==this.ctx.state){t.next=14;break}return t.next=14,this.ctx.suspend();case 14:return t.abrupt("return",!0);case 15:return t.prev=15,this.isChangingBackgroundMusic=!1,t.finish(15);case 18:case"end":return t.stop()}},t,this,[[4,,15,18]])})),function(){return n.apply(this,arguments)})},{key:"resumeBackgroundMusic",value:(e=gi(ci().mark(function t(){var e,n,r,o=arguments;return ci().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:.5,n=o.length>1&&void 0!==o[1]?o[1]:.5,this.backgroundMusic&&!this.isChangingBackgroundMusic){t.next=4;break}return t.abrupt("return",!1);case 4:if(this.isChangingBackgroundMusic=!0,t.prev=5,"suspended"!==this.ctx.state){t.next=9;break}return t.next=9,this.ctx.resume();case 9:if(!(e>0)){t.next=17;break}return this.gainNode.gain.value=0,r=this.ctx.currentTime,this.gainNode.gain.setTargetAtTime(Oi(n),r,e/3),t.next=15,new Promise(function(t){return setTimeout(t,1e3*e)});case 15:t.next=18;break;case 17:this.gainNode.gain.value=Oi(n);case 18:return t.abrupt("return",!0);case 19:return t.prev=19,this.isChangingBackgroundMusic=!1,t.finish(19);case 22:case"end":return t.stop()}},t,this,[[5,,19,22]])})),function(){return e.apply(this,arguments)})},{key:"stopBackgroundMusic",value:(t=gi(ci().mark(function t(){var e,n,r=arguments;return ci().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:.5,this.backgroundMusic&&!this.isChangingBackgroundMusic){t.next=3;break}return t.abrupt("return",!1);case 3:if(this.isChangingBackgroundMusic=!0,t.prev=4,!(e>0)){t.next=10;break}return n=this.ctx.currentTime,this.gainNode.gain.setTargetAtTime(0,n,e/3),t.next=10,new Promise(function(t){return setTimeout(t,1e3*e)});case 10:return this.stop(this.backgroundMusic),this.backgroundMusic=null,this.backgroundMusicPosition=0,t.abrupt("return",!0);case 14:return t.prev=14,this.isChangingBackgroundMusic=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[4,,14,17]])})),function(){return t.apply(this,arguments)})},{key:"isMusicPlaying",value:function(){return null!==this.backgroundMusic&&"running"===this.ctx.state}},{key:"getMusicState",value:function(){return this.backgroundMusic?"running"===this.ctx.state?"playing":"paused":"stopped"}},{key:"getCurrentTime",value:function(t){return t?t.context.currentTime-t.startTime:0}},{key:"seek",value:function(t,e){t&&t.buffer&&(t.stop(),t.start(0,e))}}]);var t,e,n,r,o,i,a}();function Oi(t){return t<=0?0:t>=1?1:Math.pow(t,3)}function xi(t){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(t)}function ji(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ti(r.key),r)}}function Pi(t,e,n){return e&&Ei(t.prototype,e),n&&Ei(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ti(t){var e=function(t){if("object"!=xi(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xi(e)?e:e+""}var Ai=function(){return Pi(function t(e){ji(this,t),this.defaultFocusable=e,this.focusedModuleRef=null},[{key:"getFocusedModule",value:function(){var t,e=null===(t=this.focusedModuleRef)||void 0===t?void 0:t.deref();if(!e)return null;if(!(e.__focusable__ instanceof _i))throw new Error("Module is not bound with Focusable class.");return e}},{key:"setDefaultFocusable",value:function(t){if(!(t.__focusable__ instanceof _i))throw new Error("Module is not a Focusable instance.");this.defaultFocusable=t}},{key:"setFocus",value:function(t){var e=this.getFocusedModule();if(e&&e.__focusable__.unFocus(),null===t&&(t=this.defaultFocusable),!(t.__focusable__ instanceof _i))throw new Error("Module is not a Focusable instance.");var n=t.__focusable__.redirect();this.focusedModuleRef=new WeakRef(n),n.__focusable__.focus()}}])}(),_i=function(){return Pi(function t(e){ji(this,t),this.module=e,this.focused=!1,this.redirectTo=null},[{key:"redirect",value:function(){var t;return(null===(t=this.redirectTo)||void 0===t?void 0:t.deref())||this.module}},{key:"setRedirection",value:function(t){this.redirectTo=t?new WeakRef(t):null}},{key:"focus",value:function(){this.focused=!0}},{key:"unFocus",value:function(){this.focused=!1}}])}();function Mi(t){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(t)}function Ci(){var t=Fi(),e=t.m(Ci),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,Ii(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(Ci=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new zi(t,e)},AsyncIterator:Di,async:function(t,e,n,o,a){return(r(e)?Ni:Ri)(i(t),e,n,o,a)},keys:Li,values:Ii}})()}function Ii(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Mi(t)+" is not iterable")}function Li(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ri(t,e,n,r,o){var i=Ni(t,e,n,r,o);return i.next().then(function(t){return t.done?t.value:i.next()})}function Ni(t,e,n,r,o){return new Di(Fi().w(t,e,n,r),o||Promise)}function Di(t,e){function n(r,o,i,a){try{var u=t[r](o),s=u.value;return s instanceof zi?e.resolve(s.v).then(function(t){n("next",t,i,a)},function(t){n("throw",t,i,a)}):e.resolve(s).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,a)})}catch(t){a(t)}}var r;this.next||(Bi(Di.prototype),Bi(Di.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Bi(this,"_invoke",function(t,o,i){function a(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(a,a):a()},!0)}function Fi(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Bi(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,u=0,s=t,h.n=n,a}};function p(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=h.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,h.v=r,h.n=i[1]):p<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,h.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,y),u=l,s=y;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(h.n=-1),p(u,s)):h.n=s:h.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Bi(e={},r,function(){return this}),e),f=c.prototype=u.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Bi(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,Bi(f,"constructor",c),Bi(c,"constructor",s),s.displayName="GeneratorFunction",Bi(c,o,"GeneratorFunction"),Bi(f),Bi(f,o,"Generator"),Bi(f,r,function(){return this}),Bi(f,"toString",function(){return"[object Generator]"}),(Fi=function(){return{w:i,m:h}})()}function Bi(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Bi=function(t,e,n,r){function i(e,n){Bi(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Bi(t,e,n,r)}function zi(t,e){this.v=t,this.k=e}function Xi(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Ui(t){return function(t){if(Array.isArray(t))return Yi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Wi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wi(t,e){if(t){if("string"==typeof t)return Yi(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yi(t,e):void 0}}function Yi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function qi(t,e,n){return Ui(t.querySelectorAll(e)).forEach(n)}function Vi(t,e){Object.entries(e).forEach(function(e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||Wi(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],o=n[1];return t.style.setProperty(r,o)})}function Gi(t,e,n,r,o,i){return Hi.apply(this,arguments)}function Hi(){return Hi=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Xi(i,r,o,a,u,"next",t)}function u(t){Xi(i,r,o,a,u,"throw",t)}a(void 0)})}}(Ci().mark(function t(e,n,r,o,i,a){var u,s,c,l,f,h,p,y,v,d;return Ci().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=a||"em",i&&(u=n.getBoundingClientRect(),r-=u.left,o-=u.top),e.style[o>=0?"top":"bottom"]="".concat(Math.abs(o)).concat(a),e.style[r>=0?"left":"right"]="".concat(Math.abs(r)).concat(a),n.appendChild(e),t.next=7,lo(1);case 7:if(s=e.offsetWidth,c=e.offsetHeight,l=n.offsetWidth,f=n.offsetHeight,h=e.getBoundingClientRect(),p=h.left,y=h.top,v=h.bottom,d=h.right,p<0||y<0||v>f||d>l){t.next=12;break}return t.abrupt("return");case 12:v>f&&(e.style.top="".concat(f-c,"px")),d>l&&(e.style.left="".concat(l-s,"px"));case 14:case"end":return t.stop()}},t)})),Hi.apply(this,arguments)}function $i(t,e){var n,r;return null!==(n=null===(r=t.composedPath)||void 0===r?void 0:r.call(t).some(function(t){return t===e}))&&void 0!==n&&n}function Ki(t,e){var n,r;return null!==(n=null===(r=t.composedPath)||void 0===r?void 0:r.call(t).find(function(t){var n;return null===(n=t.matches)||void 0===n?void 0:n.call(t,e)}))&&void 0!==n?n:null}function Zi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.h,n=void 0===e?0:e,r=t.s,o=void 0===r?0:r,i=t.l,a=void 0===i?0:i;return{h:"".concat(n,"deg"),s:"".concat(o,"%"),l:"".concat(a,"%")}}function Ji(t){var e=t.replace("#","");return{r:parseInt(e.substring(0,2),16)/255,g:parseInt(e.substring(2,4),16)/255,b:parseInt(e.substring(4,6),16)/255}}function Qi(t){var e=Ji(t),n=e.r,r=e.g,o=e.b,i=Math.max(n,r,o),a=Math.min(n,r,o),u=0,s=0,c=(i+a)/2;if(i!==a){var l=i-a;switch(s=c>.5?l/(2-i-a):l/(i+a),i){case n:u=(r-o)/l+(r<o?6:0);break;case r:u=(o-n)/l+2;break;case o:u=(n-r)/l+4}u/=6}return{h:Math.round(360*u),s:Math.round(100*s),l:Math.round(100*c)}}function ta(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.h,i=void 0===o?0:o,a=r.s,u=void 0===a?0:a,s=r.l,c=void 0===s?0:s;if(i/=360,c/=100,0==(u/=100))t=e=n=c;else{var l=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},f=c<.5?c*(1+u):c+u-c*u,h=2*c-f;t=l(h,f,i+1/3),e=l(h,f,i),n=l(h,f,i-1/3)}var p=function(t){var e=Math.round(255*t).toString(16);return 1===e.length?"0"+e:e};return"#".concat(p(t)).concat(p(e)).concat(p(n))}function ea(t){return t>1?"s":""}function na(t,e){for(var n=Ui(t),r=n.length-1;r>0;r--){var o=Math.floor(ra(e)*(r+1)),i=[n[o],n[r]];n[r]=i[0],n[o]=i[1],e++}return n}function ra(t){var e=1e4*Math.sin(t++);return e-Math.floor(e)}function oa(t){var e=t.toString(),n=e.length;if(n<4)return e;if(4===n)return e.slice(0,1)+","+e.slice(1);var r=e.slice(0,3),o=Math.floor(n/3);if(o>5)return"a lot";var i=n-3*o;return(i?r.slice(0,i)+"."+r.slice(i):r)+["h","k","m","b","t","q"][i?o:o-1]}function ia(t){return ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ia(t)}function aa(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onDown,o=n.onUp,i=n.once,a=void 0!==i&&i,u=n.capture,s=void 0!==u&&u,c=n.label,l=void 0===c?"rightclick":c;if(t){if(!o)throw new Error("[ZyXInput] onUp required for RightClick");this.on(t).pointerDownMoveUp({label:l,onDown:function(n){var i=n.moveFuse,a=n.pointerDown,u=n.eventFuse;return null==r||r(n),Ks(t).delay("pointer-down",e.mobilePressHoldDelay,function(){i.true||a.false||u.false||e.kingOfTheStack(u,function(){return o(n)})}),!0},onUp:function(t){var n=t.up_e,r=t.moveFuse,i=t.eventFuse;if("mouse"===n.pointerType&&2===n.button){if(r.true||i.false)return;e.kingOfTheStack(i,function(){return o(t)})}},once:a,capture:s})}else console.warn("[ZyXInput] Invalid element for RightClick handler")}function ua(t,e){var n=this,r=e.onClick,o=void 0===r?null:r,i=e.onDown,a=void 0===i?null:i,u=e.once,s=void 0!==u&&u,c=e.capture,l=void 0!==c&&c,f=e.stopPropagation,h=void 0!==f&&f,p=e.stopImmediatePropagation,y=void 0!==p&&p,v=e.preventDefault,d=void 0===v||v,m=e.label,b=void 0===m?"click":m,g=function(e){if(h&&e.stopPropagation(),y&&e.stopImmediatePropagation(),1===e.which){var r=n.beforePointerEvent("clickone",e);if(r){var i=new Ua(!0,{label:b});n.activeEvents.add(i);var u=null==a?void 0:a({dwn_e:e,kingOfTheStack:function(t){return n.kingOfTheStack(i)}}),s=e.clientX,c=e.clientY,l=e.target,f=n.moveTripper({startX:s,startY:c}).check;o&&t.addEventListener("pointerup",function(t){!f(t)&&i.true&&t.target===l&&n.kingOfTheStack(i,function(){return o({dwn_e:e,up_e:t,down_return:u,eventFuse:i},r)})},{once:!0})}}};return t.addEventListener("pointerdown",g,{once:s,capture:l}),d&&t.addEventListener("click",function(t){return t.preventDefault()},{once:s,capture:l}),{unbind:function(){t.removeEventListener("pointerdown",g,{capture:l}),t.removeEventListener("click",function(t){return t.preventDefault()},{capture:l})}}}function sa(t,e){var n=this;t&&"function"==typeof e?(t.setAttribute("click-enabled",""),t.addEventListener("pointerdown",function(r){if(!n.beforePointerEvent("custom-click",r))return nullifyEvent(r);t.addEventListener("click",function(){e()},{once:!0})})):console.warn("[ZyXInput] Invalid parameters for Click handler")}function ca(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.single,r=e.double,o=e.doubleWait,i=void 0!==o&&o,a=e.cooldown,u=e.cooldownDuration,s=void 0===u?this.clickOrTwoWindowMs:u,c=e.button,l=void 0===c?0:c,f=e.label,h=void 0===f?"click-or-two":f,p=(e.preventDefault,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),y=p.activeFuse,v=void 0===y?new Ua:y,d=p.dblClickFuse,m=void 0===d?new Ua:d,b=p.singleClickTimeout,g=void 0===b?null:b;t?this.on(t).pointerDownMoveUp({label:h,onDown:function(t){var e=t.dwn_e,n=t.moveFuse,r=t.pointerDown,o=t.eventFuse;if(!(a||n.true||r.false||o.false)&&e.button===l)return!0},onUp:function(t){var e=t.up_e,o=t.moveFuse,u=t.eventFuse;if(!("mouse"===e.pointerType&&e.button!==l||o.true||u.false)){if(v.true)return u.true&&(g&&(clearTimeout(g),g=null),r(t),a=setTimeout(function(){return a=null},s)),v.reset(),void m.reset();v.setTrue(),g=setTimeout(function(){v.true&&u.true&&n(t),v.reset(),g=null},i||s)}},once:!1,capture:!1}):console.warn("[ZyXInput] Invalid element for ClickOrTwo handler")}function la(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onDown,o=n.onStartMove,i=n.onMove,a=n.onUp,u=n.once,s=void 0!==u&&u,c=n.deadzone,l=void 0===c?null:c,f=n.capture,h=void 0!==f&&f,p=n.captureMove,y=void 0!==p&&p,v=n.verbose,d=void 0!==v&&v,m=n.stopPropagation,b=void 0!==m&&m,g=n.stopImmediatePropagation,w=void 0!==g&&g,k=n.stopMovePropagation,S=void 0!==k&&k,O=n.stopImmediateMovePropagation,x=void 0!==O&&O,j=n.movePrecision,E=void 0===j?1:j,P=n.label,T=void 0===P?"pointerDownMoveUp":P;if(t){var A=function(n){if(l=l||e.moveTripperDist,!e.beforePointerEvent("pointerDownMoveUp",n))return!1;var u={startX:n.clientX,startY:n.clientY},s=u.eventFuse,c=void 0===s?new Ua(!0,{label:T}):s,f=u.pointerDown,h=void 0===f?new Ua(!0,{label:T}):f,p=u.startX,v=u.startY;e.activeEvents.add(c);var m=e.deadzone({startX:p,startY:v,deadzone:l}),g=m.moveFuse,k=m.check;b&&n.stopPropagation(),w&&n.stopImmediatePropagation();var O=n.composedPath(),j={},P=j.startAngle,A=void 0===P?null:P,_=j.moveCalledOnce,M=void 0!==_&&_,C=j.latest_move_e,I=void 0===C?null:C,L=j.startMove,R=j.pixels_moved,N=void 0===R?0:R,D=null==r?void 0:r({composedPath:O,dwn_e:n,moveFuse:g,pointerDown:h,eventFuse:c,kingOfTheStack:function(t){return e.kingOfTheStack(c)},pathContains:function(t){return $i(n,t)},pathContainsMatching:function(t){return Ki(n,t)}});if(!D)return!1;var F=function(t){return e=p,n=v,r=t.clientX-e,o=t.clientY-n,(i=Math.atan2(o,r)*(180/Math.PI))<0&&(i+=360),(i+=90)>=360&&(i-=360),i;var e,n,r,o,i},B=function(t){return Math.sqrt(Math.pow(t.clientX-p,2)+Math.pow(t.clientY-v,2))},z=function(t){return e=F(t),[0,90,180,270,0][Math.round(e/90)%4];var e},X=function(r){try{if(c.false)return d&&console.log({element:t},"eventFuse.false, returning"),W();if(N++,E>1){if(N<E)return;N=0}if(I=r,!k(r))return;A||(A=F(r));var u={dwn_e:n,mv_e:r,startX:p,startY:v,startAngle:A,movementX:r.movementX,movementY:r.movementY,stop:W,up:U,moveFuse:g,startMove:L,kingOfTheStack:function(t){return e.kingOfTheStack(c)},clearAllSelections:function(){return e.clearAllSelections()},fourAngleSnap:function(){return z(r)},angleFromStart:function(){return F(r)},distanceFromStart:function(){return B(r)},direction:function(){return ui(F(r))}};if(S&&r.stopPropagation(),x&&r.stopImmediatePropagation(),M&&i)return i(u,D);if(o){if(!(L=o(u,D)))return!1;"object"===ia(L)&&null!==L&&("onMove"in L&&(i=L.onMove),"onUp"in L&&(a=L.onUp))}e.kingOfTheStack(c),M=!0}catch(t){console.error("[ZyXInput] Error in move handler:",t)}},U=function(t){var e;h.setFalse(),W(),null===(e=a)||void 0===e||e({dwn_e:n,up_e:t,composedPath:O,mv_e:I,startX:p,startY:v,startAngle:A,startMove:L,moveFuse:g,onStartMove:o,eventFuse:c,fourAngleSnap:function(){return z(t)},angleFromStart:function(){return F(t)},distanceFromStart:function(){return B(t)},direction:function(){return ui(F(t))}},D)};document.addEventListener("pointermove",X,{capture:y}),document.addEventListener("pointerup",U),document.addEventListener("pointercancel",U);var W=function(){document.removeEventListener("pointermove",X,{capture:y}),document.removeEventListener("pointerup",U),document.removeEventListener("pointercancel",U)}};return t.addEventListener("pointerdown",A,{once:s,capture:h}),{removeEventListener:function(){return t.removeEventListener("pointerdown",A,{capture:h})}}}console.warn("[ZyXInput] Invalid element for PointerDownMoveUp handler")}function fa(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.onWheel,r=e.capture,o=void 0!==r&&r,i=e.passive,a=void 0!==i&&i;if(t&&"function"==typeof n){var u=function(t){n({whl_e:t,killPropagation:function(){t.stopPropagation(),t.stopImmediatePropagation()},pathContains:function(e){return $i(t,e)},pathContainsMatching:function(e){return Ki(t,e)}})};return t.addEventListener("wheel",u,{capture:o,passive:a}),{unbind:function(){t.removeEventListener("wheel",u,{capture:o})}}}console.warn("[ZyXInput] Invalid parameters for Wheel handler")}function ha(t){this.on(t).clickOrTwo({single:function(e){return window.open(t.href,"_blank")},double:function(e){return window.open(t.href,"_blank",["height=1400","width=1000","top=10","left=10"].join(","))}})}function pa(t){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(t)}function ya(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,va(r.key),r)}}function va(t){var e=function(t){if("object"!=pa(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pa(e)?e:e+""}var da,ma=function(){return function(t,e){return e&&ya(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.scrollTarget,a=o.directions,u=void 0===a?"y":a,s=o.overrideDefaultScroll,c=void 0===s||s,l=o.onPointerMove,f=o.onWheel,h=o.onScroll,p=o.swapY,y=o.swapX;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n?(this.directions="x"===u?{x:!0,y:!1}:"y"===u?{x:!1,y:!0}:{x:!0,y:!0},this.container=n,this.scrollTarget=i||n,this.container._momentumScroll=this,this.swapY=p,this.swapX=y,this.velocityY=0,this.animating=!1,this.pointerDown=!1,this.direction="down",this.onScroll=h,this.velocityX=0,this.friction=.94,this.minVelocityY=1,this.maxVelIncr=20,this.maxVelocityY=400,this.minVelocityX=1,this.maxVelocityX=400,this.smallDeltaStep={floor:10,culm:0,culmLimit:10,tick:10},this.smallDeltaStepX={floor:10,culm:0,culmLimit:20,tick:20},this.tick_length=8,this.lastFramePerf=null,c&&this.container.addEventListener("wheel",function(t){f&&!f(t)||r.wheel(t)},{capture:!0,passive:!1}),this._setupPointerEvents(e,l)):console.warn("[ZyXInput] Invalid container for MomentumScroll")},[{key:"_setupPointerEvents",value:function(t,e){var n=this;t.on(this.container).pointerDownMoveUp({capture:!0,captureMove:!0,onDown:function(t){var e=t.dwn_e;return!n._checkPathForMomentumScroll(e)&&(n.pointerDown=!0,!0)},onStartMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.direction,r=t.stop,o=t.clearAllSelections,i=e(),a="left"===i||"right"===i;return("up"===i||"down"===i)&&!n.directions.y||a&&!n.directions.x?r():(n.directions.y&&(o(),n.container.requestPointerLock()),!0)},onMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mv_e,o=t.movementY,i=t.movementX;if(r.stopPropagation(),r.stopImmediatePropagation(),!n.directions.y||0!==o||!n.directions.x||0!==i){n.container.classList.add("Scrolling"),null==e||e({mv_e:r,movementY:o,movementX:i});var a=r.shiftKey?1:.5;if(r.altKey&&(a/=4),n.directions.y){var u=o*-a;n.addVelocity(0,u)}if(n.directions.x){var s=i*-a;n.addVelocity(s,0)}}},onUp:function(){n.container.classList.remove("Scrolling"),document.exitPointerLock(),n.pointerDown=!1}})}},{key:"_checkPathForMomentumScroll",value:function(t){for(var e=t.composedPath(),n=0;n<e.length;n++){var r=e[n];if(r===this.container)break;if(r._momentumScroll)return!0}return!1}},{key:"__animate__",value:function(){!this.animating&&(this.animating=!0)&&requestAnimationFrame(this.__frame__.bind(this))}},{key:"__framedelta__",value:function(){var t=performance.now();if(null===this.lastFramePerf)return this.lastFramePerf=t,0;var e=t-this.lastFramePerf;return this.lastFramePerf=t,e/this.tick_length}},{key:"__frame__",value:function(){var t,e=this.__framedelta__();if(0!==e){var n=this.pointerDown?.95*this.friction:this.friction,r=Math.pow(n,e),o=0,i=0,a=0,u=0;this.directions.y&&(this.velocityY*=r,u=Math.abs(this.velocityY),i=this.velocityY*e,this.scrollTarget.scrollTop+=i),this.directions.x&&(this.velocityX*=r,a=Math.abs(this.velocityX),o=this.velocityX*e,this.scrollTarget.scrollLeft+=o),null===(t=this.onScroll)||void 0===t||t.call(this,{deltaX:o,deltaY:i});var s,c=!this.directions.y||u<this.minVelocityY;if((!this.directions.x||a<this.minVelocityX)&&c)return this.lastFramePerf=null,this.animating=!1,void(null===(s=this.onScroll)||void 0===s||s.call(this,{deltaX:0,deltaY:0}));this.animating&&requestAnimationFrame(this.__frame__.bind(this))}else this.animating&&requestAnimationFrame(this.__frame__.bind(this))}},{key:"checkCounterScroll",value:function(t){this.directions.y&&(t.deltaY>0&&this.velocityY<0||t.deltaY<0&&this.velocityY>0)&&(this.velocityY/=10),this.directions.x&&(t.deltaX>0&&this.velocityX<0||t.deltaX<0&&this.velocityX>0)&&(this.velocityX/=10)}},{key:"resetVelocity",value:function(){this.directions.y&&(this.velocityY/=10),this.directions.x&&(this.velocityX/=10),this.__animate__()}},{key:"slowStop",value:function(){console.log("> slowStop",this.velocityY,this.velocityX),this.velocityY/=4,this.velocityX/=4,console.log("slowStop >",this.velocityY,this.velocityX)}},{key:"addVelocity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.directions.y&&0!==e&&((e>0&&this.velocityY<0||e<0&&this.velocityY>0)&&(this.velocityY/=10),this.velocityY=Math.max(-this.maxVelocityY,Math.min(this.velocityY+e,this.maxVelocityY))),this.directions.x&&0!==t&&((t>0&&this.velocityX<0||t<0&&this.velocityX>0)&&(this.velocityX/=10),this.velocityX=Math.max(-this.maxVelocityX,Math.min(this.velocityX+t,this.maxVelocityX))),this.__animate__()}},{key:"wheel",value:function(t){if(!this._checkPathForMomentumScroll(t)){t.preventDefault(),t.stopPropagation(),this.checkCounterScroll(t);var e=t.deltaX,n=t.deltaY;this.swapY&&(e=t.deltaY),this.swapX&&(n=t.deltaX),this.direction=n>0?"down":"up";var r=0,o=0;this.directions.y&&0!==n?Math.abs(n)<this.smallDeltaStep.floor?(this.smallDeltaStep.culm+=n,Math.abs(this.smallDeltaStep.culm)>this.smallDeltaStep.culmLimit&&(o=this.smallDeltaStep.tick*(n>0?1:-1),this.smallDeltaStep.culm=0)):(o=.1*n,this.smallDeltaStep.culm=0):this.smallDeltaStep.culm=0,this.directions.x&&0!==e?Math.abs(e)<this.smallDeltaStepX.floor?(this.smallDeltaStepX.culm+=e,Math.abs(this.smallDeltaStepX.culm)>this.smallDeltaStepX.culmLimit&&(r=this.smallDeltaStepX.tick*(e>0?1:-1),this.smallDeltaStepX.culm=0)):(r=.1*e,this.smallDeltaStepX.culm=0):this.smallDeltaStepX.culm=0,0===r&&0===o||this.addVelocity(r,o)}}}])}();function ba(t){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(t)}function ga(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function wa(t,e,n){return(e=Oa(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ka(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Sa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oa(r.key),r)}}function Oa(t){var e=function(t){if("object"!=ba(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ba(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ba(e)?e:e+""}var xa=function(){return function(t,e){return e&&Sa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input_binder=e,this.tapsToExit=3,this.backPresses=this.tapsToExit,this.onBack=[],window.history.pushState({},""),window.addEventListener("popstate",function(){return n.handleBackButton()}),this._createTapIndicator()},[{key:"_createTapIndicator",value:function(){Pn(da||(da=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n            <div this="tap_indicator" class="tap-to-exit-confirm">\n                <div class="tap-to-exit-label" this="nth">Go back '," more times to exit app.</div>\n            </div>\n        "])),this.tapsToExit).bind(this)}},{key:"handleBackButton",value:function(){var t,e=this,n=this.onBack.sort(function(t,e){return t.weight>e.weight?1:-1});this.onBack=this.onBack.filter(function(t){return t.cb.deref()});var r,o,i,a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ka(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ka(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(n);try{for(a.s();!(r=a.n()).done;){var u=r.value.cb.deref();if(u&&u())return void window.history.pushState({},"")}}catch(t){a.e(t)}finally{a.f()}this.backPresses<3&&(null===(o=(i=window.navigator).vibrate)||void 0===o||o.call(i,300)),Ks(this).delay("back-panic",700,function(){var t;e.backPresses=e.tapsToExit,window.history.pushState({},""),null===(t=e.tap_indicator)||void 0===t||t.classList.remove("visible")}),null===(t=this.tap_indicator)||void 0===t||t.classList.add("visible");var s=Math.max(1,this.backPresses);if(this.nth.textContent="Go back ".concat(s," more time").concat(s>1?"s":""," to exit app."),this.backPresses--,this.backPresses<=0)return Hs(),window.history.back();window.history.pushState({},"")}},{key:"on",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"function"==typeof t?this.onBack.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ga(Object(n),!0).forEach(function(e){wa(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({cb:new WeakRef(t),weight:0},e)):console.warn("[ZyXInput] Invalid callback for BackHandler.on()")}}])}();function ja(t){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(t)}function Ea(){var t=Ca(),e=t.m(Ea),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,Pa(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(Ea=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new La(t,e)},AsyncIterator:Ma,async:function(t,e,n,o,a){return(r(e)?_a:Aa)(i(t),e,n,o,a)},keys:Ta,values:Pa}})()}function Pa(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(ja(t)+" is not iterable")}function Ta(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Aa(t,e,n,r,o){var i=_a(t,e,n,r,o);return i.next().then(function(t){return t.done?t.value:i.next()})}function _a(t,e,n,r,o){return new Ma(Ca().w(t,e,n,r),o||Promise)}function Ma(t,e){function n(r,o,i,a){try{var u=t[r](o),s=u.value;return s instanceof La?e.resolve(s.v).then(function(t){n("next",t,i,a)},function(t){n("throw",t,i,a)}):e.resolve(s).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,a)})}catch(t){a(t)}}var r;this.next||(Ia(Ma.prototype),Ia(Ma.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Ia(this,"_invoke",function(t,o,i){function a(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(a,a):a()},!0)}function Ca(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Ia(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,u=0,s=t,h.n=n,a}};function p(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=h.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,h.v=r,h.n=i[1]):p<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,h.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,y),u=l,s=y;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(h.n=-1),p(u,s)):h.n=s:h.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ia(e={},r,function(){return this}),e),f=c.prototype=u.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Ia(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,Ia(f,"constructor",c),Ia(c,"constructor",s),s.displayName="GeneratorFunction",Ia(c,o,"GeneratorFunction"),Ia(f),Ia(f,o,"Generator"),Ia(f,r,function(){return this}),Ia(f,"toString",function(){return"[object Generator]"}),(Ca=function(){return{w:i,m:h}})()}function Ia(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ia=function(t,e,n,r){function i(e,n){Ia(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Ia(t,e,n,r)}function La(t,e){this.v=t,this.k=e}function Ra(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Na(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Da(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,za(r.key),r)}}function Ba(t,e,n){return e&&Fa(t.prototype,e),n&&Fa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function za(t){var e=function(t){if("object"!=ja(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ja(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ja(e)?e:e+""}var Xa=function(){return Ba(function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.customQueryFunc,o=n.customClearSelections,i=n.onKeyPress,a=void 0===i?null:i;Da(this,t),this.onKeyPress=a,this.customQueryFunc=r,this.customClearSelections=o,this.enabledDefaults=["Tab","Esc","F5","F11","F12","KeyI","KeyC","KeyV","KeyX"],this._initializeEventListeners(),this.mouse={x:0,y:0,pointerDown:!1},this.activeEvents=new dt,this.openModals=new dt,this.listenToController=!1,this.clickOrTwoWindowMs=250,this.moveTripperDist=10,this.mobilePressHoldDelay=550,this.backHandler=new xa(this),this.backHandler.on(function(t){return e.processModalEvent()},{weight:1e3})},[{key:"_initializeEventListeners",value:function(){var t=this;document.addEventListener("keypress",function(e){return t.keyEvent("keypress",e)}),document.addEventListener("keydown",function(e){return t.keyEvent("keydown",e)}),document.addEventListener("keyup",function(e){return t.keyEvent("keyup",e)}),document.addEventListener("pointermove",function(e){return t._updateMousePosition(e)}),document.addEventListener("pointerdown",function(e){return t._updateMousePosition(e,!0)}),document.addEventListener("pointerup",function(e){return t.mouse.pointerDown=!1}),document.addEventListener("pointerleave",function(e){return t.mouse.pointerDown=!1}),document.addEventListener("contextmenu",function(t){if(t.shiftKey||Ki(t,"[can-contextmenu]"))return!1;!function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault()}(t)}),this.on(document).dragstart(function(t){})}},{key:"_updateMousePosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.mouse.x=t.clientX,this.mouse.y=t.clientY,e&&(this.mouse.pointerDown=!0)}},{key:"on",value:function(t){var n=this;return new Proxy(e,{get:function(e,r){return n.customEventHandlers(t,r)}})}},{key:"customEventHandlers",value:function(t,n){var r=this;if(e[n])return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e[n].bind(r).apply(void 0,[t].concat(i))};switch(n){case"pointerdown":case"pointerup":case"dragstart":return function(e){t.addEventListener(n,function(t){var o=r.beforePointerEvent(n,t);e(t,o)})};default:throw new Error("Event function ".concat(n,"(elem, ...args) not found in ZyXInput.presets"))}}},{key:"bindMomentumScroll",value:function(t,e){return new ma(this,t,e)}},{key:"queryApplication",value:function(t){var e;return(null==this||null===(e=this.customQueryFunc)||void 0===e?void 0:e.call(this,t))||document.querySelectorAll(t)}},{key:"clearAllSelections",value:function(){var t;(null==this||null===(t=this.customClearSelections)||void 0===t?void 0:t.call(this))||window.getSelection().removeAllRanges()}},{key:"nullAllEvents",value:function(){this.activeEvents.clear()}},{key:"kingOfTheStack",value:function(t,e){var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Na(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this.activeEvents.get());try{for(r.s();!(n=r.n()).done;){var o=n.value;o!==t&&o.setFalse()}}catch(t){r.e(t)}finally{r.f()}null==e||e(),this.nullAllEvents()}},{key:"beforePointerEvent",value:function(t,e){switch(t){case"pointerDownMoveUp":case"pointerdown":case"dragstart":case"custom-click":case"clickone":case"clickortwo":if(this.processModalEvent(e))return!1;default:return!0}}},{key:"processModalEvent",value:function(t){var e=this.openModals.get();return e.length<0||e.length>0&&(!t||!Ki(t,"[is-modal]"))&&(e.forEach(function(t){return t.clickedOutside(t)}),this.nullAllEvents(),null==t||t.stopPropagation(),null==t||t.stopImmediatePropagation(),this.openModals.clear(),!0)}},{key:"isolateEventWithinContainer",value:function(t,e){return this.openModals.add(t),t.setAttribute("is-modal",""),t.clickedOutside=e.bind(t),e}},{key:"unisolateEventWithinContainer",value:function(t){this.openModals.delete(t),t.removeAttribute("is-modal")}},{key:"moveTripper",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startX,n=t.startY,r=t.deadzone,o=this.deadzone({startX:e,startY:n,deadzone:r}),i=o.moveFuse,a=o.check;return document.addEventListener("pointermove",a),document.addEventListener("pointerup",function(){return document.removeEventListener("pointermove",a)},{once:!0}),{moveFuse:i,check:a}}},{key:"deadzone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startX,n=t.startY,r=t.deadzone,o=void 0===r?this.moveTripperDist:r,i=t.moveFuse,a=void 0===i?new Ua:i;return{moveFuse:a,check:function(t){return Math.hypot(t.clientX-e,t.clientY-n)>o&&a.setTrue(),a.true}}}},{key:"keyEvent",value:(t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Ra(i,r,o,a,u,"next",t)}function u(t){Ra(i,r,o,a,u,"throw",t)}a(void 0)})}}(Ea().mark(function t(e,n){var r;return Ea().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"key"in n){t.next=3;break}return t.abrupt("return");case 3:if(!(n.ctrlKey||n.metaKey||this.queryApplication("input:focus,textarea:focus").length>0)){t.next=5;break}return t.abrupt("return",!1);case 5:n.joy||this.enabledDefaults.includes(n.code)||(n.preventDefault(),n.stopPropagation()),null==this||null===(r=this.onKeyPress)||void 0===r||r.call(this,e,n),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(0),console.error("[Key Event Error]",{event:e,e:n,error:t.t0}),t.t0;case 13:case"end":return t.stop()}},t,this,[[0,9]])})),function(e,n){return t.apply(this,arguments)})},{key:"socketXinputEvent",value:function(t){if(this.listenToController){var e=1===t.pressed?"keydown":"keyup";this.keyEvent(e,{joy:!0,key:Wa[t.button]})}}}]);var t}(),Ua=function(){return Ba(function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Da(this,t),this.true=e,this.false=!e},[{key:"reset",value:function(t){return this.true=!1,this.false=!0,"function"==typeof t&&t(),this}},{key:"falseTrue",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return this.true?e.apply(void 0,r):t.apply(void 0,r),this}},{key:"setTrue",value:function(){return this.true=!0,this.false=!1,this}},{key:"setFalse",value:function(){return this.true=!1,this.false=!0,this}}])}(),Wa={1:"x-uppad",2:"x-downpad",3:"x-leftpad",4:"x-rightpad",5:"x-menu",6:"x-start",7:"x-rightjoy",8:"x-leftjoy",9:"x-leftbumper",10:"x-rightbumper",13:"x-A",14:"x-X",15:"x-B",16:"x-Y"};function Ya(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return qa(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qa(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Va(t){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Va(t)}function Ga(){return Ga="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ou(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ga.apply(null,arguments)}function Ha(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ka(r.key),r)}}function $a(t,e,n){return e&&Ha(t.prototype,e),n&&Ha(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ka(t){var e=function(t){if("object"!=Va(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Va(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Va(e)?e:e+""}function Za(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ja(t,e,n){return e=ou(e),function(t,e){if(e&&("object"==Va(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qa(t)}(t,nu()?Reflect.construct(e,n||[],ou(t).constructor):e.apply(t,n))}function Qa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ru(t,e)}function eu(t){var e="function"==typeof Map?new Map:void 0;return eu=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(nu())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&ru(o,n.prototype),o}(t,arguments,ou(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ru(n,t)},eu(t)}function nu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(nu=function(){return!!t})()}function ru(t,e){return ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ru(t,e)}function ou(t){return ou=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ou(t)}var iu=Object.create(null);iu.open="0",iu.close="1",iu.ping="2",iu.pong="3",iu.message="4",iu.upgrade="5",iu.noop="6";var au=Object.create(null);Object.keys(iu).forEach(function(t){au[iu[t]]=t});for(var uu={type:"error",data:"parser error"},su="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),cu="function"==typeof ArrayBuffer,lu=function(t,e,n){var r,o=t.type,i=t.data;return su&&i instanceof Blob?e?n(i):fu(i,n):cu&&(i instanceof ArrayBuffer||(r=i,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?e?n(i):fu(new Blob([i]),n):n(iu[o]+(i||""))},fu=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)},hu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),pu=0;pu<64;pu++)hu["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(pu)]=pu;var yu="function"==typeof ArrayBuffer,vu=function(t,e){if("string"!=typeof t)return{type:"message",data:mu(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:du(t.substring(1),e)}:au[n]?t.length>1?{type:au[n],data:t.substring(1)}:{type:au[n]}:uu},du=function(t,e){if(yu){var n=function(t){var e,n,r,o,i,a=.75*t.length,u=t.length,s=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(e=0;e<u;e+=4)n=hu[t.charCodeAt(e)],r=hu[t.charCodeAt(e+1)],o=hu[t.charCodeAt(e+2)],i=hu[t.charCodeAt(e+3)],l[s++]=n<<2|r>>4,l[s++]=(15&r)<<4|o>>2,l[s++]=(3&o)<<6|63&i;return c}(t);return mu(n,e)}return{base64:!0,data:t}},mu=function(t,e){return"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t},bu=String.fromCharCode(30);function gu(t){if(t)return function(t){for(var e in gu.prototype)t[e]=gu.prototype[e];return t}(t)}gu.prototype.on=gu.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},gu.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},gu.prototype.off=gu.prototype.removeListener=gu.prototype.removeAllListeners=gu.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},gu.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e)}return this},gu.prototype.emitReserved=gu.prototype.emit,gu.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},gu.prototype.hasListeners=function(t){return!!this.listeners(t).length};var wu="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function ku(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{})}var Su=setTimeout,Ou=clearTimeout;function xu(t,e){e.useNativeTimers?(t.setTimeoutFn=Su.bind(wu),t.clearTimeoutFn=Ou.bind(wu)):(t.setTimeoutFn=setTimeout.bind(wu),t.clearTimeoutFn=clearTimeout.bind(wu))}var ju,Eu=function(){function t(e,n,r){var o;return Za(this,t),(o=Ja(this,t,[e])).description=n,o.context=r,o.type="TransportError",o}return tu(t,eu(Error)),$a(t)}(),Pu=function(){function t(e){var n;return Za(this,t),(n=Ja(this,t)).writable=!1,xu(Qa(n),e),n.opts=e,n.query=e.query,n.readyState="",n.socket=e.socket,n}return tu(t,gu),$a(t,[{key:"onError",value:function(e,n,r){return Ga(ou(t.prototype),"emitReserved",this).call(this,"error",new Eu(e,n,r)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,Ga(ou(t.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(t){var e=vu(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(e){Ga(ou(t.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",Ga(ou(t.prototype),"emitReserved",this).call(this,"close",e)}}])}(),Tu="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Au={},_u=0,Mu=0;function Cu(t){var e="";do{e=Tu[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function Iu(){var t=Cu(+new Date);return t!==ju?(_u=0,ju=t):t+"."+Cu(_u++)}for(;Mu<64;Mu++)Au[Tu[Mu]]=Mu;function Lu(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}var Ru=!1;try{Ru="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(iu){}var Nu=Ru;function Du(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Nu))return new XMLHttpRequest}catch(t){}if(!e)try{return new(wu[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function Fu(){}var Bu=null!=new Du({xdomain:!1}).responseType,zu=function(){function t(e,n){var r;return Za(this,t),xu(Qa(r=Ja(this,t)),n),r.opts=n,r.method=n.method||"GET",r.uri=e,r.async=!1!==n.async,r.data=void 0!==n.data?n.data:null,r.create(),r}return tu(t,gu),$a(t,[{key:"create",value:function(){var e=this,n=ku(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd,n.xscheme=!!this.opts.xs;var r=this.xhr=new Du(n);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var o in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.opts.extraHeaders[o])}catch(n){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{r.setRequestHeader("Accept","*/*")}catch(n){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn(function(){e.onError("number"==typeof r.status?r.status:0)},0))},r.send(this.data)}catch(n){return void this.setTimeoutFn(function(){e.onError(n)},0)}"undefined"!=typeof document&&(this.index=t.requestsCount++,t.requests[this.index]=this)}},{key:"onError",value:function(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Fu,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete t.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}])}();function Xu(){for(var t in zu.requests)zu.requests.hasOwnProperty(t)&&zu.requests[t].abort()}zu.requestsCount=0,zu.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Xu):"function"==typeof addEventListener&&addEventListener("onpagehide"in wu?"pagehide":"unload",Xu,!1));var Uu="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},Wu=wu.WebSocket||wu.MozWebSocket,Yu="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),qu={websocket:function(){function t(e){var n;return Za(this,t),(n=Ja(this,t,[e])).supportsBinary=!e.forceBase64,n}return tu(t,Pu),$a(t,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=Yu?{}:ku(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Yu?new Wu(t,e,n):e?new Wu(t,e):new Wu(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=function(e){return t.onClose({description:"websocket connection closed",context:e})},this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(){var n=t[r],o=r===t.length-1;lu(n,e.supportsBinary,function(t){try{e.ws.send(t)}catch(t){}o&&Uu(function(){e.writable=!0,e.emitReserved("drain")},e.setTimeoutFn)})},r=0;r<t.length;r++)n()}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Iu()),this.supportsBinary||(t.b64=1);var r=Lu(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!Wu}}])}(),polling:function(){function t(e){var n;if(Za(this,t),(n=Ja(this,t,[e])).polling=!1,"undefined"!=typeof location){var r="https:"===location.protocol,o=location.port;o||(o=r?"443":"80"),n.xd="undefined"!=typeof location&&e.hostname!==location.hostname||o!==e.port,n.xs=e.secure!==r}var i=e&&e.forceBase64;return n.supportsBinary=Bu&&!i,Qa(n)}return tu(t,Pu),$a(t,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){e.readyState="paused",t()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(t){var e=this;(function(t,e){for(var n=t.split(bu),r=[],o=0;o<n.length;o++){var i=vu(n[o],e);if(r.push(i),"error"===i.type)break}return r})(t,this.socket.binaryType).forEach(function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose({description:"transport closed by the server"}),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var t=this,e=function(){t.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}},{key:"write",value:function(t){var e=this;this.writable=!1,function(t){var n=t.length,r=new Array(n),o=0;t.forEach(function(t,i){lu(t,!1,function(t){r[i]=t,++o===n&&function(t){e.doWrite(t,function(){e.writable=!0,e.emitReserved("drain")})}(r.join(bu))})})}(t)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Iu()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=Lu(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new zu(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",function(t,e){n.onError("xhr post error",t,e)})}},{key:"doPoll",value:function(){var t=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",function(e,n){t.onError("xhr poll error",e,n)}),this.pollXhr=e}}])}()},Vu=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gu=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Hu(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var o=Vu.exec(t||""),i={},a=14;a--;)i[Gu[a]]=o[a]||"";return-1!=n&&-1!=r&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(t,e){var n=e.replace(/\/{2,9}/g,"/").split("/");return"/"!=e.slice(0,1)&&0!==e.length||n.splice(0,1),"/"==e.slice(-1)&&n.splice(n.length-1,1),n}(0,i.path),i.queryKey=function(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,r){e&&(n[e]=r)}),n}(0,i.query),i}var $u=function(){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Za(this,t),n=Ja(this,t),e&&"object"==Va(e)&&(r=e,e=null),e?(e=Hu(e),r.hostname=e.host,r.secure="https"===e.protocol||"wss"===e.protocol,r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=Hu(r.host).host),xu(Qa(n),r),n.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=n.secure?"443":"80"),n.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),n.port=r.port||("undefined"!=typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=r.transports||["polling","websocket"],n.readyState="",n.writeBuffer=[],n.prevBufferLen=0,n.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),n.opts.path=n.opts.path.replace(/\/$/,"")+"/","string"==typeof n.opts.query&&(n.opts.query=function(t){for(var e={},n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}(n.opts.query)),n.id=null,n.upgrades=null,n.pingInterval=null,n.pingTimeout=null,n.pingTimeoutTimer=null,"function"==typeof addEventListener&&(n.opts.closeOnBeforeunload&&(n.beforeunloadEventListener=function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())},addEventListener("beforeunload",n.beforeunloadEventListener,!1)),"localhost"!==n.hostname&&(n.offlineEventListener=function(){n.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",n.offlineEventListener,!1))),n.open(),n}return tu(t,gu),$a(t,[{key:"createTransport",value:function(t){var e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);var n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new qu[t](n)}},{key:"open",value:function(){var e,n=this;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(function(){n.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(t){return e.onClose("transport close",t)})}},{key:"probe",value:function(e){var n=this,r=this.createTransport(e),o=!1;t.priorWebsocketSuccess=!1;var i=function(){o||(r.send([{type:"ping",data:"probe"}]),r.once("packet",function(e){if(!o)if("pong"===e.type&&"probe"===e.data){if(n.upgrading=!0,n.emitReserved("upgrading",r),!r)return;t.priorWebsocketSuccess="websocket"===r.name,n.transport.pause(function(){o||"closed"!==n.readyState&&(f(),n.setTransport(r),r.send([{type:"upgrade"}]),n.emitReserved("upgrade",r),r=null,n.upgrading=!1,n.flush())})}else{var i=new Error("probe error");i.transport=r.name,n.emitReserved("upgradeError",i)}}))};function a(){o||(o=!0,f(),r.close(),r=null)}var u=function(t){var e=new Error("probe error: "+t);e.transport=r.name,a(),n.emitReserved("upgradeError",e)};function s(){u("transport closed")}function c(){u("socket closed")}function l(t){r&&t.name!==r.name&&a()}var f=function(){r.removeListener("open",i),r.removeListener("error",u),r.removeListener("close",s),n.off("close",c),n.off("upgrading",l)};r.once("open",i),r.once("error",u),r.once("close",s),this.once("close",c),this.once("upgrading",l),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",t.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,n=this.upgrades.length;e<n;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(function(){t.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var t,e=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(t){for(var e=0,n=0,r=0,o=t.length;r<o;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this.maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},r=function(){t.once("upgrade",n),t.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){t.upgrading?r():e()}):this.upgrading?r():e()),this}},{key:"onError",value:function(e){t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}])}();$u.protocol=4;var Ku,Zu="function"==typeof ArrayBuffer,Ju=Object.prototype.toString,Qu="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ju.call(Blob),ts="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ju.call(File);function es(t){return Zu&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))||Qu&&t instanceof Blob||ts&&t instanceof File}function ns(t,e){if(!t||"object"!=Va(t))return!1;if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(ns(t[n]))return!0;return!1}if(es(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return ns(t.toJSON(),!0);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&ns(t[o]))return!0;return!1}function rs(t){var e=[],n=t.data,r=t;return r.data=os(n,e),r.attachments=e.length,{packet:r,buffers:e}}function os(t,e){if(!t)return t;if(es(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var r=new Array(t.length),o=0;o<t.length;o++)r[o]=os(t[o],e);return r}if("object"==Va(t)&&!(t instanceof Date)){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=os(t[a],e));return i}return t}function is(t,e){return t.data=as(t.data,e),t.attachments=void 0,t}function as(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=as(t[n],e);else if("object"==Va(t))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=as(t[r],e));return t}!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(Ku||(Ku={}));var us=function(){function t(e){var n;return Za(this,t),(n=Ja(this,t)).reviver=e,n}return tu(t,gu),$a(t,[{key:"add",value:function(e){var n;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");(n=this.decodeString(e)).type===Ku.BINARY_EVENT||n.type===Ku.BINARY_ACK?(this.reconstructor=new ss(n),0===n.attachments&&Ga(ou(t.prototype),"emitReserved",this).call(this,"decoded",n)):Ga(ou(t.prototype),"emitReserved",this).call(this,"decoded",n)}else{if(!es(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,Ga(ou(t.prototype),"emitReserved",this).call(this,"decoded",n))}}},{key:"decodeString",value:function(e){var n=0,r={type:Number(e.charAt(0))};if(void 0===Ku[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Ku.BINARY_EVENT||r.type===Ku.BINARY_ACK){for(var o=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var i=e.substring(o,n);if(i!=Number(i)||"-"!==e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(n+1)){for(var a=n+1;++n&&","!==e.charAt(n)&&n!==e.length;);r.nsp=e.substring(a,n)}else r.nsp="/";var u=e.charAt(n+1);if(""!==u&&Number(u)==u){for(var s=n+1;++n;){var c=e.charAt(n);if(null==c||Number(c)!=c){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){var l=this.tryParse(e.substr(n));if(!t.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"tryParse",value:function(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(t,e){switch(t){case Ku.CONNECT:return"object"==Va(e);case Ku.DISCONNECT:return void 0===e;case Ku.CONNECT_ERROR:return"string"==typeof e||"object"==Va(e);case Ku.EVENT:case Ku.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case Ku.ACK:case Ku.BINARY_ACK:return Array.isArray(e)}}}])}(),ss=function(){return $a(function t(e){Za(this,t),this.packet=e,this.buffers=[],this.reconPack=e},[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=is(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}])}(),cs=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Ku},Encoder:function(){return $a(function t(e){Za(this,t),this.replacer=e},[{key:"encode",value:function(t){return t.type!==Ku.EVENT&&t.type!==Ku.ACK||!ns(t)?[this.encodeAsString(t)]:(t.type=t.type===Ku.EVENT?Ku.BINARY_EVENT:Ku.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var e=""+t.type;return t.type!==Ku.BINARY_EVENT&&t.type!==Ku.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}},{key:"encodeAsBinary",value:function(t){var e=rs(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}])}(),Decoder:us});function ls(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var fs=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),hs=function(){function t(e,n,r){var o;return Za(this,t),(o=Ja(this,t)).connected=!1,o.receiveBuffer=[],o.sendBuffer=[],o.ids=0,o.acks={},o.flags={},o.io=e,o.nsp=n,r&&r.auth&&(o.auth=r.auth),o.io._autoConnect&&o.open(),o}return tu(t,gu),$a(t,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[ls(t,"open",this.onopen.bind(this)),ls(t,"packet",this.onpacket.bind(this)),ls(t,"error",this.onerror.bind(this)),ls(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(fs.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.unshift(t);var o={type:Ku.EVENT,data:n,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var i=this.ids++,a=n.pop();this._registerAckCallback(i,a),o.id=i}var u=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!u||!this.connected)||(this.connected?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}},{key:"_registerAckCallback",value:function(t,e){var n=this,r=this.flags.timeout;if(void 0!==r){var o=this.io.setTimeoutFn(function(){delete n.acks[t];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===t&&n.sendBuffer.splice(r,1);e.call(n,new Error("operation has timed out"))},r);this.acks[t]=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.io.clearTimeoutFn(o),e.apply(n,[null].concat(r))}}else this.acks[t]=e}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;"function"==typeof this.auth?this.auth(function(e){t.packet({type:Ku.CONNECT,data:e})}):this.packet({type:Ku.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case Ku.CONNECT:if(t.data&&t.data.sid){var e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ku.EVENT:case Ku.BINARY_EVENT:this.onevent(t);break;case Ku.ACK:case Ku.BINARY_ACK:this.onack(t);break;case Ku.DISCONNECT:this.ondisconnect();break;case Ku.CONNECT_ERROR:this.destroy();var n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var n,r=Ya(this._anyListeners.slice());try{for(r.s();!(n=r.n()).done;)n.value.apply(this,e)}catch(t){r.e(t)}finally{r.f()}}Ga(ou(t.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(t){var e=this,n=!1;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=!0,e.packet({type:Ku.ACK,id:t,data:o}))}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach(function(e){return t.emitEvent(e)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(e){t.notifyOutgoingListeners(e),t.packet(e)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(t){return t()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Ku.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}},{key:"prependAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}},{key:"offAnyOutgoing",value:function(t){if(!this._anyOutgoingListeners)return this;if(t){for(var e=this._anyOutgoingListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var e,n=Ya(this._anyOutgoingListeners.slice());try{for(n.s();!(e=n.n()).done;)e.value.apply(this,t.data)}catch(t){n.e(t)}finally{n.f()}}}}])}();function ps(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ps.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=1&Math.floor(10*e)?t+n:t-n}return 0|Math.min(t,this.max)},ps.prototype.reset=function(){this.attempts=0},ps.prototype.setMin=function(t){this.ms=t},ps.prototype.setMax=function(t){this.max=t},ps.prototype.setJitter=function(t){this.jitter=t};var ys=function(){function t(e,n){var r,o;Za(this,t),(r=Ja(this,t)).nsps={},r.subs=[],e&&"object"==Va(e)&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",r.opts=n,xu(Qa(r),n),r.reconnection(!1!==n.reconnection),r.reconnectionAttempts(n.reconnectionAttempts||1/0),r.reconnectionDelay(n.reconnectionDelay||1e3),r.reconnectionDelayMax(n.reconnectionDelayMax||5e3),r.randomizationFactor(null!==(o=n.randomizationFactor)&&void 0!==o?o:.5),r.backoff=new ps({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==n.timeout?2e4:n.timeout),r._readyState="closed",r.uri=e;var i=n.parser||cs;return r.encoder=new i.Encoder,r.decoder=new i.Decoder,r._autoConnect=!1!==n.autoConnect,r._autoConnect&&r.open(),r}return tu(t,gu),$a(t,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(~this._readyState.indexOf("open"))return this;this.engine=new $u(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var o=ls(n,"open",function(){r.onopen(),t&&t()}),i=ls(n,"error",function(n){r.cleanup(),r._readyState="closed",e.emitReserved("error",n),t?t(n):r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;0===a&&o();var u=this.setTimeoutFn(function(){o(),n.close(),n.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&u.unref(),this.subs.push(function(){clearTimeout(u)})}return this.subs.push(o),this.subs.push(i),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(ls(t,"ping",this.onping.bind(this)),ls(t,"data",this.ondata.bind(this)),ls(t,"error",this.onerror.bind(this)),ls(t,"close",this.onclose.bind(this)),ls(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}},{key:"ondecoded",value:function(t){var e=this;Uu(function(){e.emitReserved("packet",t)},this.setTimeoutFn)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n||(n=new hs(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var r=n[e];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(t){for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach(function(t){return t()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn(function(){e.skipReconnect||(t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(function(n){n?(e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}])}(),vs={};function ds(t,e){"object"==Va(t)&&(e=t,t=void 0);var n,r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),r=Hu(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),o=r.source,i=r.id,a=r.path,u=vs[i]&&a in vs[i].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||u?n=new ys(o,e):(vs[i]||(vs[i]=new ys(o,e)),n=vs[i]),r.query&&!e.query&&(e.query=r.queryKey),n.socket(r.path,e)}function ms(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return bs(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bs(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function gs(t){return gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(t)}function ws(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ks(t,e,n){return(e=Os(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ss(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Os(r.key),r)}}function Os(t){var e=function(t){if("object"!=gs(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gs(e)?e:e+""}Object.assign(ds,{Manager:ys,Socket:hs,io:ds,connect:ds});var xs=function(){return function(t,e){return e&&Ss(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.endpointUrl,r=e.events,o=void 0===r?{}:r,i=e.autoConnect,a=void 0===i||i,u=e.debug,s=void 0!==u&&u,c=e.socketOptions,l=void 0===c?{}:c;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("endpointUrl is required");this.endpointUrl=n,this.debug=s,this.socketOptions=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ws(Object(n),!0).forEach(function(e){ks(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3},l),this.sio=ds(this.endpointUrl,this.socketOptions),this.extendedEvents={},this.rooms=new Set,this.setupConnectionHandlers(),this.bind(o),a&&this.connect()},[{key:"setupConnectionHandlers",value:function(){var t=this;this.sio.on("connect",function(){t.debug&&console.log("[socketio] Connected to server"),t.connected()}),this.sio.on("disconnect",function(e){t.debug&&console.log("[socketio] Disconnected from server:",e),t.extendedEvents.disconnected&&t.extendedEvents.disconnected(e)}),this.sio.on("connect_error",function(e){t.debug&&console.error("[socketio] Connection error:",e),t.extendedEvents.error&&t.extendedEvents.error(e)})}},{key:"connect",value:function(){this.sio.connected||this.sio.connect()}},{key:"disconnect",value:function(){this.sio.disconnect()}},{key:"connected",value:function(){this.extendedEvents.connected&&this.extendedEvents.connected()}},{key:"join",value:function(t){if(!t)throw new Error("roomCode is required");this.debug&&console.log("[socketio] Joining room:",t),this.sio.emit("enter",{room_code:t}),this.rooms.add(t),this.extendedEvents.roomJoined&&this.extendedEvents.roomJoined(t)}},{key:"leave",value:function(t){if(!t)throw new Error("roomCode is required");this.debug&&console.log("[socketio] Leaving room:",t),this.sio.emit("leave",{room_code:t}),this.rooms.delete(t),this.extendedEvents.roomLeft&&this.extendedEvents.roomLeft(t)}},{key:"getRooms",value:function(){return Array.from(this.rooms)}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("event name is required");this.debug&&console.log("[socketio] Emitting event:",t,e),this.sio.emit(t,e)}},{key:"bind",value:function(t){if(!t||"object"!==gs(t))throw new Error("nameCallbacks must be an object");for(var e=0,n=Object.entries(t);e<n.length;e++){var r=ms(n[e],2),o=r[0],i=r[1];if("function"!=typeof i)throw new Error('Callback for event "'.concat(o,'" must be a function'));["connected","disconnected","error","roomJoined","roomLeft"].includes(o)?this.extendedEvents[o]=i:this.sio.on(o,i)}}},{key:"removeAllListeners",value:function(){this.sio.removeAllListeners(),this.extendedEvents={},this.rooms.clear()}},{key:"isConnected",value:function(){return this.sio.connected}}])}();function js(t,e,n,r,o){"none"!==r&&(t.style.display=r),t.style.animation="".concat(e," ").concat(n),t.addEventListener("animationend",function n(i){i.animationName===e&&("none"===r&&(t.style.display=r),t.removeEventListener("animationend",n),o&&o())})}function Es(t){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(t)}function Ps(){var t=Is(),e=t.m(Ps),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,i){return e.resultName=o,n(r.d,Ts(t),i)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(Ps=function(){return{wrap:function(e,n,r,o){return t.w(i(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new Rs(t,e)},AsyncIterator:Cs,async:function(t,e,n,o,a){return(r(e)?Ms:_s)(i(t),e,n,o,a)},keys:As,values:Ts}})()}function Ts(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Es(t)+" is not iterable")}function As(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function _s(t,e,n,r,o){var i=Ms(t,e,n,r,o);return i.next().then(function(t){return t.done?t.value:i.next()})}function Ms(t,e,n,r,o){return new Cs(Is().w(t,e,n,r),o||Promise)}function Cs(t,e){function n(r,o,i,a){try{var u=t[r](o),s=u.value;return s instanceof Rs?e.resolve(s.v).then(function(t){n("next",t,i,a)},function(t){n("throw",t,i,a)}):e.resolve(s).then(function(t){u.value=t,i(u)},function(t){return n("throw",t,i,a)})}catch(t){a(t)}}var r;this.next||(Ls(Cs.prototype),Ls(Cs.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Ls(this,"_invoke",function(t,o,i){function a(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(a,a):a()},!0)}function Is(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return Ls(c,"_invoke",function(n,r,o){var i,u,s,c=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,u=0,s=t,h.n=n,a}};function p(n,r){for(u=n,s=r,e=0;!f&&c&&!o&&e<l.length;e++){var o,i=l[e],p=h.p,y=i[2];n>3?(o=y===r)&&(s=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(u=0,h.v=r,h.n=i[1]):p<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,h.n=y,u=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,y),u=l,s=y;(e=u<2?t:s)||!f;){i||(u?u<3?(u>1&&(h.n=-1),p(u,s)):h.n=s:h.v=s);try{if(c=2,i){if(u||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=i.return)&&e.call(i),u<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==a)break}catch(e){i=t,u=1,s=e}finally{c=1}}return{value:e,done:f}}}(n,o,i),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ls(e={},r,function(){return this}),e),f=c.prototype=u.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Ls(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=c,Ls(f,"constructor",c),Ls(c,"constructor",s),s.displayName="GeneratorFunction",Ls(c,o,"GeneratorFunction"),Ls(f),Ls(f,o,"Generator"),Ls(f,r,function(){return this}),Ls(f,"toString",function(){return"[object Generator]"}),(Is=function(){return{w:i,m:h}})()}function Ls(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ls=function(t,e,n,r){function i(e,n){Ls(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Ls(t,e,n,r)}function Rs(t,e){this.v=t,this.k=e}function Ns(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ds(r.key),r)}}function Ds(t){var e=function(t){if("object"!=Es(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Es(e)?e:e+""}function Fs(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Bs(t){return zs.apply(this,arguments)}function zs(){return zs=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Fs(i,r,o,a,u,"next",t)}function u(t){Fs(i,r,o,a,u,"throw",t)}a(void 0)})}}(Ps().mark(function t(e){var n,r,o,i,a=arguments;return Ps().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(n=a.length>1&&void 0!==a[1]?a[1]:{}).top,o=n.left,!Xs.has(e)){t.next=7;break}Xs.get(e).update_target({top:r,left:o}),t.next=10;break;case 7:return i=new Us(e,r,o),Xs.set(e,i),t.abrupt("return",new Promise(function(t){i.onend=t,i.start()}));case 10:case"end":return t.stop()}},t)})),zs.apply(this,arguments)}var Xs=new WeakMap,Us=function(){return function(t,e){return e&&Ns(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.target={top:n,left:r},this.startContext={startTop:e.scrollTop,startLeft:e.scrollLeft},this.startTime=performance.now(),this.onend=null,this.duration=200},[{key:"update_target",value:function(t){var e=t.top,n=t.left;void 0!==e&&(this.target.top=e),void 0!==n&&(this.target.left=n),this.startContext={startTop:this.container.scrollTop,startLeft:this.container.scrollLeft},this.startTime=performance.now()}},{key:"frame",value:function(){var t=performance.now()-this.startTime,e=this.target,n=e.top,r=e.left,o=this.startContext,i=o.startTop,a=o.startLeft,u="easeInOutQuad",s=null!=n?n:this.container.scrollTop,c=null!=r?r:this.container.scrollLeft;t<this.duration?(void 0!==n&&(this.container.scrollTop=Ws[u](t,i,s-i,this.duration)),void 0!==r&&(this.container.scrollLeft=Ws[u](t,a,c-a,this.duration)),requestAnimationFrame(this.frame.bind(this))):(void 0!==n&&(this.container.scrollTop=s),void 0!==r&&(this.container.scrollLeft=c),Xs.delete(this.container),this.onend&&this.onend())}},{key:"start",value:function(){requestAnimationFrame(this.frame.bind(this))}}])}(),Ws={easeInOutQuad:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInQuad:function(t,e,n,r){return n*((t/=r)*t)+e},easeOutQuad:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},easeBounce:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}},Ys=document.createElement("canvas");Ys.width=500,Ys.height=500;var qs,Vs=Ys.getContext("2d",{willReadFrequently:!0});function Gs(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(n,r){var o=new Image;e&&(o.crossOrigin="Anonymous");var i,a,u=-4,s={r:0,g:0,b:0},c=0;o.src=t,o.onload=function(){if(Vs.drawImage(o,0,0,500,500),!Vs)return n();try{i=Vs.getImageData(0,0,500,500)}catch(t){return console.log("error",t),n()}for(a=i.data.length;(u+=120)<a;)++c,s.r+=i.data[u],s.g+=i.data[u+1],s.b+=i.data[u+2];o.remove(),s.r=~~(s.r/c),s.g=~~(s.g/c),s.b=~~(s.b/c);var t=s.r/=255,e=s.g/=255,r=s.b/=255,l=Math.min(t,e,r),f=Math.max(t,e,r),h=f-l,p=0,y=0,v=0;p=0==h?0:f==t?(e-r)/h%6:f==e?(r-t)/h+2:(t-e)/h+4,(p=Math.round(60*p))<0&&(p+=360),v=(f+l)/2,y=(100*(y=0==h?0:h/(1-Math.abs(2*v-1)))).toFixed(1),v=(100*v).toFixed(1),y<3&&(p=200),n({h:p,s:y,l:v})}})}function Hs(){return navigator.maxTouchPoints>0}var $s={forQuery:qi,setProps:Vi,delay:Lo,instant:No,clearDelay:Ro,delayChain:Co,breakDelayChain:Io,debounce:Do,addEventListeners:Vo,removeEventListeners:Go};function Ks(t){return new Proxy($s,{get:function(e,n){if(e.hasOwnProperty(n)){var r=e[n];return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,[t].concat(n))}}throw new Error("zyX().".concat(n," is not a function"))}})}Cr(qs||(qs=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n    ph {\n        display: none;\n    }\n"])));export{So as AsynConstructor,mo as AsyncWorker,Dr as Cookies,mt as Deque,Ai as FocusController,_i as Focusable,jo as LegacyAsynConstructor,Dt as LiveDeque,be as LiveDomList,Nt as LiveList,Ft as LiveVar,Bs as ScrollTo,dt as WeakRefSet,Si as ZyXAudio,qo as ZyXEvents,bn as ZyXHTML,xs as ZyXIO,Xa as ZyXInput,Vo as addEventListeners,Eo as asyncPool,Io as breakDelayChain,Gs as calculateDominantColor,Ho as clamp,_ as clearAllSelections,Ro as clearDelay,Cr as css,cr as dataToBlob,Do as debounce,Ks as default,Lo as delay,Co as delayChain,ar as deleteData,js as displayAnimation,Hn as fetchCSS,rr as fetchJSON,fr as fetchWithTimeout,A as forEachShadowRoot,qi as forQuery,T as getAllShadowRoots,Vn as getData,u as getTopLevelElements,$n as grabBlob,Qi as hexToHSL,Ji as hexToRGB,Zi as hslCssKeys,ta as hslToHex,Pn as html,ur as injectScript,s as insertAfter,No as instant,ri as isEven,ai as isFloat,ii as isInteger,Hs as isMobile,oi as isOdd,$o as lerp,Zn as loadImg,On as makePlaceable,Ko as mapRange,Gi as placeSafely,$i as pointerEventPathContains,Ki as pointerEventPathContainsMatching,qn as postData,Gn as postForm,ir as putData,M as queryAllRoots,ni as randomFloat,ei as randomInt,Go as removeEventListeners,Qo as roundTo,ti as roundToDecimals,ea as sS,Zo as scaleFromOffset,Jo as scaleToOffset,ra as seedRandom,na as seedShuffle,Vi as setProps,oa as shorthandNumber,Qn as shrinkImage,lo as sleep,nr as splitFilename,Fo as throttle,Ne as zyxTransform,Mr as zyxcss};